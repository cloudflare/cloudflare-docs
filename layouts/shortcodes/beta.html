{{- $heading := .Get "heading" -}}
{{- $ID := .Inner | urlize -}}
{{- $includeHeading := default true (.Get "includeHeading") -}}

{{- if $includeHeading -}}

<div class="DocsMarkdown-beta">
    <!-- If "heading=" tag is included -->
    {{ if and ($heading) (not (eq $heading "h1")) }}
        {{- printf "<%s id='%s'>" $heading $ID | safeHTML -}}
        <span class="DocsMarkdown--header-anchor-positioner">
            <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#{{- $ID -}}">&#8203;â€‹</a>
        </span>
        <span>{{- .Page.RenderString .Inner -}}</span>
        {{- printf "</%s>" $heading | safeHTML -}}
        <div class="DocsMarkdown--pill DocsMarkdown--pill-beta DocsMarkdown-pill-lower">Beta</div>
    <!-- Otherwise render as <h1> -->
    {{- else -}}
        <h1 id="{{- $ID -}}">{{- .Page.RenderString .Inner -}}</h1>
        <div class="DocsMarkdown--pill DocsMarkdown--pill-beta">Beta</div>
    {{- end -}}
</div>

{{- else -}}
<div class="DocsMarkdown-beta">
    <span>{{- .Page.RenderString .Inner -}}</span>
    <div class="DocsMarkdown--pill DocsMarkdown--pill-beta">Beta</div>
</div>
{{- end -}}
