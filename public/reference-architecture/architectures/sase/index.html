<!doctype html>
<html lang="en" theme="light" is-docs-page js-focus-visible-polyfill-available >
  <head>

  <meta charset="utf-8">
  <title>Reference Architecture: Evolving to a SASE architecture with Cloudflare · Cloudflare Reference Architecture docs</title>
  <meta name="title" content="Reference Architecture: Evolving to a SASE architecture with Cloudflare · Cloudflare Reference Architecture docs" />
  <meta name="image" content="https://developers.cloudflare.com/core-services-preview.png" />

  <meta http-equiv="cleartype" content="on" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="application-name" content="Reference Architecture: Evolving to a SASE architecture with Cloudflare · Cloudflare Reference Architecture docs" />
  <meta name="msapplication-tap-highlight" content="no" />
  <meta name="apple-mobile-web-app-title" content="Reference Architecture: Evolving to a SASE architecture with Cloudflare · Cloudflare Reference Architecture docs" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="theme-color" content="#f38020" />

  <meta name="description" content="Download a PDF version of this reference architecture." />

  <meta property="og:site_name" content="Cloudflare Docs" />
  <meta property="og:image" content="https://developers.cloudflare.com/core-services-preview.png" />
  <meta property="og:title" content="Reference Architecture: Evolving to a SASE architecture with Cloudflare · Cloudflare Reference Architecture docs" />
  <meta property="og:description" content="Download a PDF version of this reference architecture." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://developers.cloudflare.com/reference-architecture/architectures/sase/" />

  <meta name="twitter:title" content="Reference Architecture: Evolving to a SASE architecture with Cloudflare · Cloudflare Reference Architecture docs" />
  <meta name="twitter:image" content="https://developers.cloudflare.com/core-services-preview.png" />
  <meta name="twitter:description" content="Download a PDF version of this reference architecture." />
  <meta name="twitter:card" content="summary_large_image" />

  <meta name="pcx_product" content="reference-architecture"><meta name="algolia_product_filter" content="Reference Architecture"><meta name="algolia_page_title" content="Reference Architecture: Evolving to a SASE architecture with Cloudflare">
  <meta name="pcx_word_count" content="11100"><meta name="pcx_last_modified" content="82"><meta name="pcx_last_reviewed" content="500" /><meta name="pcx_content_type" content="reference-architecture" />
  <meta name="algolia_content_type" content="Reference Architecture"><meta name="pcx_content_group" content="Cloudflare essentials" />
  
  
  <link rel="icon" href="/favicon-32x32.png" />
  <link rel="canonical" href="https://developers.cloudflare.com/reference-architecture/architectures/sase/" />
  <link rel="sitemap" href="/sitemap.xml" type="application/xml" />
  <link rel="manifest" href="/manifest.webmanifest" />

  <link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png" />
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png" />
  <link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png" />
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png" />
  <link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png" />
  <link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png" />
  <link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png" />
  <link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png" /><script type="module" src="/search.js" defer></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3.5.1" />
  <script defer async src="https://cdn.jsdelivr.net/npm/@docsearch/js@3.5.1"></script>
  <script>window.algoliaConfig = {"apikey":"4edb0a6cef3338ff4bcfbc6b3d2db56b","index":"developers-cloudflare2","product":"reference-architecture"}</script>
  <meta name="docsearch:product" content="reference-architecture" /><link rel="stylesheet preconnect" href="/style.css" />
      <link rel="stylesheet preconnect" href="/codeBlock.css" /><link rel="preload" href="https://unpkg.com/littlefoot@4.0.0-11/dist/littlefoot.css" as="style">
    <link rel="preload" href="https://unpkg.com/littlefoot@4.0.0-11/dist/littlefoot.js" as="script" />
    <link rel="stylesheet" href="https://unpkg.com/littlefoot@4.0.0-11/dist/littlefoot.css" /><script>// <stdin>
(function() {
  let tooEarly = false;
  let btn;
  let media;
  if (document.readyState !== "loading")
    init();
  else
    addEventListener("DOMContentLoaded", init);
  btn = document.querySelector("#ThemeToggle");
  tooEarly = !btn;
  function setter(isDark) {
    try {
      let theme = isDark ? "dark" : "light";
      document.documentElement.setAttribute("theme", theme);
      document.documentElement.setAttribute("data-theme", theme);
      localStorage.theme = JSON.stringify({ theme });
      if (btn) {
        btn.checked = isDark;
        tooEarly = false;
      } else if (tooEarly) {
        setTimeout(setter, 1, isDark);
      }
    } catch (err) {
    }
    const themeToggleTooltip = document.querySelector("#ThemeToggle--tooltip");
    if (!themeToggleTooltip)
      return;
    if (isDark) {
      themeToggleTooltip.textContent = "Set theme to light (\u21E7+D)";
    } else {
      themeToggleTooltip.textContent = "Set theme to dark (\u21E7+D)";
    }
  }
  function init() {
    btn = btn || document.querySelector("#ThemeToggle");
    btn.addEventListener("change", () => setter(!!btn.checked));
    addEventListener("keydown", (ev) => {
      if (ev.target !== document.body || ev.repeat)
        return;
      if (ev.which === 68 && ev.shiftKey) {
        ev.preventDefault();
        setter(!btn.checked);
      }
    });
  }
  try {
    media = window.matchMedia("(prefers-color-scheme:dark)");
    media.onchange = (ev) => setter(ev.matches);
  } catch (err) {
  }
  try {
    let value = localStorage.theme;
    let row = value && JSON.parse(value);
    setter(row ? /dark/.test(row.theme) : !!(media && media.matches));
  } catch (err) {
  }
})();
</script><script type="module" src="/main.js" defer></script></head>
  <body><div class="DocsPage"><div>
    <a class="skip-link" href='#main'>Skip to content</a>
</div><div class="DocsMobileHeader">
  <a class="DocsMobileHeader--cloudflare-logo-link Link Link-without-underline" href="/">
    <div class="DocsNavLogoLockup DocsNavLogoLockup-with-small-gap">
      
<div class="DocsNavLogoLockup--logo">
  <svg viewBox="0 0 48 48" fill="currentColor" role="img" aria-labelledby="title - 4fd8cc4ecdcfcca1b4b5a6858dc24dfe" xmlns="http://www.w3.org/2000/svg">
    <title id="title - 4fd8cc4ecdcfcca1b4b5a6858dc24dfe">Cloudflare Docs logomark</title>
    <path d="M31.236 28.717c-.373-.548-1.003-.864-1.76-.9l-14.353-.195a.262.262 0 01-.221-.122.348.348 0 01-.035-.267.396.396 0 01.338-.268l14.48-.195c1.714-.085 3.58-1.533 4.232-3.309l.828-2.25a.503.503 0 00.023-.292c-.932-4.404-4.698-7.689-9.198-7.689-4.15 0-7.672 2.798-8.931 6.679a4.156 4.156 0 00-2.973-.864c-1.994.207-3.59 1.874-3.789 3.954a4.84 4.84 0 00.105 1.545c-3.253.097-5.853 2.871-5.853 6.29 0 .304.024.608.059.912.023.146.14.256.28.256h26.488c.151 0 .291-.11.338-.268l.198-.742c.245-.876.152-1.68-.256-2.275zM36.062 21.39c-.128 0-.268 0-.396.012-.093 0-.175.073-.21.17l-.56 2.032c-.244.876-.151 1.679.257 2.275.373.548 1.003.864 1.76.9l3.055.195c.093 0 .175.049.222.122a.356.356 0 01.035.267.396.396 0 01-.339.268l-3.182.195c-1.726.085-3.58 1.532-4.232 3.309l-.234.62c-.046.122.035.243.164.243h10.935a.289.289 0 00.28-.219 8.654 8.654 0 00.292-2.214c0-4.501-3.521-8.175-7.847-8.175"></path>
  </svg>
</div>
<span class="DocsNavLogoLockup--text">
  <span data-text="Cloudflare">Cloudflare </span>
  <span data-text="Docs">Docs</span>
</span>
    </div>
  </a>
</div>

<div class="DocsMobileTitleHeader">
  <a aria-current="page" class="DocsMobileTitleHeader--logo-link Link Link-without-underline" href="/reference-architecture/">
    <div class="DocsNavLogoLockup DocsNavLogoLockup-with-small-gap">
      <div class="DocsNavLogoLockup--logo">
        <span title="Cloudflare Reference Architecture logo"><svg width="64" height="64" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M51.4372 57.0486H40.0506L37.7169 53.0486H49.4372V25.2045L35.4559 25.1468L33.4642 23.1468V9.10795L17.4106 9.10796V37.9861H13.4106V7.10796L15.4106 5.10796H35.4642L36.8842 5.69956L52.8572 21.8043L53.4372 23.2127V55.0486L51.4372 57.0486ZM37.4642 11.9646V21.1551L46.617 21.1928L37.4642 11.9646Z" /><path d="M17.4106 60.5137C20.0882 60.5137 22.2588 58.3431 22.2588 55.6655C22.2588 53.8247 21.2328 52.2235 19.7216 51.4025C19.6201 51.3474 19.5164 51.2958 19.4106 51.2478C18.8009 50.9714 18.1237 50.8174 17.4106 50.8174C16.8249 50.8174 16.2635 50.9212 15.7437 51.1116C15.6694 51.1388 15.596 51.1677 15.5235 51.1984C15.4857 51.2144 15.448 51.2309 15.4106 51.2478C13.7309 52.0095 12.5625 53.7011 12.5625 55.6655C12.5625 58.3431 14.7331 60.5137 17.4106 60.5137Z" /><path d="M27.8201 59.909L33.0331 50.9739L38.2464 59.909H27.8201Z" /><path d="M29.4521 24.7759V33.3807H20.8474V24.7759H29.4521Z" /><path d="M27.1496 41.2822V36.3807H23.1496V41.2822H15.4106V48.0745C16.0492 47.9067 16.7195 47.8174 17.4106 47.8174C18.1018 47.8174 18.7721 47.9067 19.4106 48.0745V45.2822H30.8889V48.462L34.8889 48.462V41.2822H27.1496Z" /></svg></span>
      </div>

      <span class="DocsNavLogoLockup--text">
        <span class="DocsSidebar--docs-title-text-scaler" style="--length:22">Reference Architecture</span>
      </span>
    </div>
  </a>

  <button class="Button DocsMobileTitleHeader--sidebar-toggle-button">
    <span class="DocsMobileTitleHeader--sidebar-toggle-button-icon" aria-hidden="true">
      <svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" role="img" aria-labelledby="title-1332672649688018"
        xmlns="http://www.w3.org/2000/svg">
        <title id="title-1332672649688018">Navigation menu icon</title>
        <path data-index="1" d="M5, 7h10" transform-origin="10  7"></path>
        <path data-index="2" d="M5,10h10" transform-origin="10 10"></path>
        <path data-index="3" d="M5,13h10" transform-origin="10 13"></path>
      </svg>
      <span is-visually-hidden="">Open external link</span>
    </span>
  </button>
</div>

<div class="DocsMobileNavBackdrop"></div><div class="DocsSidebar">
  <div class="DocsSidebar--sections">
    <div class="DocsSidebar--section DocsSidebar--header-section">
      <a class="DocsSidebar--cloudflare-logo-link DocsSidebar--link" href="/">
        <div class="DocsNavLogoLockup">
          
<div class="DocsNavLogoLockup--logo">
  <svg viewBox="0 0 48 48" fill="currentColor" role="img" aria-labelledby="title - cad4641d88aefb5cd425cbf8fccdcec4" xmlns="http://www.w3.org/2000/svg">
    <title id="title - cad4641d88aefb5cd425cbf8fccdcec4">Cloudflare Docs logomark</title>
    <path d="M31.236 28.717c-.373-.548-1.003-.864-1.76-.9l-14.353-.195a.262.262 0 01-.221-.122.348.348 0 01-.035-.267.396.396 0 01.338-.268l14.48-.195c1.714-.085 3.58-1.533 4.232-3.309l.828-2.25a.503.503 0 00.023-.292c-.932-4.404-4.698-7.689-9.198-7.689-4.15 0-7.672 2.798-8.931 6.679a4.156 4.156 0 00-2.973-.864c-1.994.207-3.59 1.874-3.789 3.954a4.84 4.84 0 00.105 1.545c-3.253.097-5.853 2.871-5.853 6.29 0 .304.024.608.059.912.023.146.14.256.28.256h26.488c.151 0 .291-.11.338-.268l.198-.742c.245-.876.152-1.68-.256-2.275zM36.062 21.39c-.128 0-.268 0-.396.012-.093 0-.175.073-.21.17l-.56 2.032c-.244.876-.151 1.679.257 2.275.373.548 1.003.864 1.76.9l3.055.195c.093 0 .175.049.222.122a.356.356 0 01.035.267.396.396 0 01-.339.268l-3.182.195c-1.726.085-3.58 1.532-4.232 3.309l-.234.62c-.046.122.035.243.164.243h10.935a.289.289 0 00.28-.219 8.654 8.654 0 00.292-2.214c0-4.501-3.521-8.175-7.847-8.175"></path>
  </svg>
</div>
<span class="DocsNavLogoLockup--text">
  <span data-text="Cloudflare">Cloudflare </span>
  <span data-text="Docs">Docs</span>
</span>
        </div>
      </a>
    </div>

    <div class="DocsSidebar--section-separator"></div>

    <div class="DocsSidebar--section DocsSidebar--docs-title-section">
      <a aria-current="page" class="DocsSidebar--docs-title-logo-link DocsSidebar--link" href="/reference-architecture/">
        <div class="DocsNavLogoLockup">
          <div class="DocsNavLogoLockup--logo">
            <span title="Cloudflare Reference Architecture logo"><svg width="64" height="64" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M51.4372 57.0486H40.0506L37.7169 53.0486H49.4372V25.2045L35.4559 25.1468L33.4642 23.1468V9.10795L17.4106 9.10796V37.9861H13.4106V7.10796L15.4106 5.10796H35.4642L36.8842 5.69956L52.8572 21.8043L53.4372 23.2127V55.0486L51.4372 57.0486ZM37.4642 11.9646V21.1551L46.617 21.1928L37.4642 11.9646Z" /><path d="M17.4106 60.5137C20.0882 60.5137 22.2588 58.3431 22.2588 55.6655C22.2588 53.8247 21.2328 52.2235 19.7216 51.4025C19.6201 51.3474 19.5164 51.2958 19.4106 51.2478C18.8009 50.9714 18.1237 50.8174 17.4106 50.8174C16.8249 50.8174 16.2635 50.9212 15.7437 51.1116C15.6694 51.1388 15.596 51.1677 15.5235 51.1984C15.4857 51.2144 15.448 51.2309 15.4106 51.2478C13.7309 52.0095 12.5625 53.7011 12.5625 55.6655C12.5625 58.3431 14.7331 60.5137 17.4106 60.5137Z" /><path d="M27.8201 59.909L33.0331 50.9739L38.2464 59.909H27.8201Z" /><path d="M29.4521 24.7759V33.3807H20.8474V24.7759H29.4521Z" /><path d="M27.1496 41.2822V36.3807H23.1496V41.2822H15.4106V48.0745C16.0492 47.9067 16.7195 47.8174 17.4106 47.8174C18.1018 47.8174 18.7721 47.9067 19.4106 48.0745V45.2822H30.8889V48.462L34.8889 48.462V41.2822H27.1496Z" /></svg></span>
          </div>

          <span class="DocsNavLogoLockup--text">
            <span class="DocsSidebar--docs-title-text-scaler" style="--length:22">Reference Architecture</span>
          </span>
        </div>
      </a>

      <div class="DocsSidebar--section-more Dropdown" data-expanded="false">
        <button class="DocsSidebar--section-more-button Button" aria-expanded="false">
          <div class="DocsSidebar--section-more-button-icon">
            <svg viewBox="0 0 4 16" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" fill="currentColor" role="img" aria-labelledby="title-6032186738345315"
              xmlns="http://www.w3.org/2000/svg">
              <title id="title-6032186738345315">Dropdown icon</title>
              <path d="M2,2v0m0,6v0m0,6v0z"></path>
            </svg>
            <span is-visually-hidden>Reference Architecture menu</span>
          </div>
        </button>

        <div class="DocsSidebar--section-more-dropdown Dropdown--dropdown">
          <ul class="Dropdown--list"><li class="Dropdown--item">
                <a class="Dropdown--link" href="https://cloudflare.com" tabindex="-1">Cloudflare homepage</a>
              </li></ul>
        </div>
      </div>
    </div>

    <div class="DocsSidebar--section DocsSidebar--nav-section" style="position:relative;overflow:hidden;width:100%;height:100%">
      <div style="position: absolute; inset: 0px; overflow-y: auto; margin-right: 0px; margin-bottom: 0px;">
        <div class="DocsSidebar--nav-section-shadow" style="opacity: 0;"></div>

        <ul class="DocsSidebar--nav">
          <li class="DocsSidebar--nav-item">
            <a class="DocsSidebar--nav-link" href="/reference-architecture/">
              <span class="DocsSidebar--nav-link-highlight"></span>
              <span class="DocsSidebar--nav-link-text">Overview</span>
            </a>
          </li>
          <li class="DocsSidebar--nav-item" is-active-root is-expanded><button class="Button DocsSidebar--nav-expand-collapse-button">
      <span class="DocsSidebar--nav-expand-collapse-button-content" aria-hidden="true"></span>
      <span is-visually-hidden>Expand: Reference Architectures</span>
    </button><a class="DocsSidebar--nav-link"  href="/reference-architecture/architectures/"  >
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Reference Architectures</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-expanded" style="min-height:0px;transition-duration:400ms" is-expanded><div class="DocsSidebar--nav-item-collapse-wrapper">
          <div class="DocsSidebar--nav-item-collapse-wrapperInner">
            <div class="DocsSidebar--nav-item-collapse-content">
              <ul class="DocsSidebar--nav-subnav" depth="1" style="--depth:1"><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/architectures/cloudflare-sase-with-microsoft/"  >
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Cloudflare SASE with Microsoft</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/architectures/cdn/"  >
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Content Delivery Network (CDN)</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/architectures/load-balancing/"  >
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Load Balancing</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/architectures/magic-transit/"  >
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Magic Transit</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/architectures/multi-vendor/"  >
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Multi-Vendor Architecture</span></a></li><li class="DocsSidebar--nav-item" is-active><a aria-current="page" class="DocsSidebar--nav-link"  href="/reference-architecture/architectures/sase/"   is-active>
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Secure Access Service Edge (SASE)</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/architectures/security/"  >
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Security</span></a></li></ul>
            </div>
          </div>
        </div>
      </div></li><li class="DocsSidebar--nav-item"><button class="Button DocsSidebar--nav-expand-collapse-button">
      <span class="DocsSidebar--nav-expand-collapse-button-content" aria-hidden="true"></span>
      <span is-visually-hidden>Expand: Reference Architecture Diagrams</span>
    </button><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/"  >
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Reference Architecture Diagrams</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style="min-height:0px;"><div class="DocsSidebar--nav-item-collapse-wrapper">
          <div class="DocsSidebar--nav-item-collapse-wrapperInner">
            <div class="DocsSidebar--nav-item-collapse-content">
              <ul class="DocsSidebar--nav-subnav" depth="1" style="--depth:1"><li class="DocsSidebar--nav-item"><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex="-1">
      <span class="DocsSidebar--nav-expand-collapse-button-content" aria-hidden="true"></span>
      <span is-visually-hidden>Expand: Artificial Intelligence (AI)</span>
    </button><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/ai/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Artificial Intelligence (AI)</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style="min-height:0px;"><div class="DocsSidebar--nav-item-collapse-wrapper">
          <div class="DocsSidebar--nav-item-collapse-wrapperInner">
            <div class="DocsSidebar--nav-item-collapse-content">
              <ul class="DocsSidebar--nav-subnav" depth="2" style="--depth:2"><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/ai/ai-video-caption/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Automatic captioning for video uploads</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/ai/ai-composable/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Composable AI architecture</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/ai/ai-asset-creation/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Content-based asset creation</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/ai/ai-multivendor-observability-control/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Multi-vendor AI observability and control</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/ai/ai-rag/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Retrieval Augmented Generation (RAG)</span></a></li></ul>
            </div>
          </div>
        </div>
      </div></li><li class="DocsSidebar--nav-item"><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex="-1">
      <span class="DocsSidebar--nav-expand-collapse-button-content" aria-hidden="true"></span>
      <span is-visually-hidden>Expand: Content Delivery</span>
    </button><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/content-delivery/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Content Delivery</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style="min-height:0px;"><div class="DocsSidebar--nav-item-collapse-wrapper">
          <div class="DocsSidebar--nav-item-collapse-wrapperInner">
            <div class="DocsSidebar--nav-item-collapse-content">
              <ul class="DocsSidebar--nav-subnav" depth="2" style="--depth:2"><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/content-delivery/optimizing-image-delivery-with-cloudflare-image-resizing-and-r2/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Optimizing Image Delivery with Cloudflare Image Resizing and R2</span></a></li></ul>
            </div>
          </div>
        </div>
      </div></li><li class="DocsSidebar--nav-item"><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex="-1">
      <span class="DocsSidebar--nav-expand-collapse-button-content" aria-hidden="true"></span>
      <span is-visually-hidden>Expand: Secure Access Service Edge (SASE)</span>
    </button><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/sase/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Secure Access Service Edge (SASE)</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style="min-height:0px;"><div class="DocsSidebar--nav-item-collapse-wrapper">
          <div class="DocsSidebar--nav-item-collapse-wrapperInner">
            <div class="DocsSidebar--nav-item-collapse-content">
              <ul class="DocsSidebar--nav-subnav" depth="2" style="--depth:2"><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/sase/sase-clientless-access-private-dns/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Access to private apps without having to deploy client agents</span></a></li></ul>
            </div>
          </div>
        </div>
      </div></li><li class="DocsSidebar--nav-item"><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex="-1">
      <span class="DocsSidebar--nav-expand-collapse-button-content" aria-hidden="true"></span>
      <span is-visually-hidden>Expand: Security</span>
    </button><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/security/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Security</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style="min-height:0px;"><div class="DocsSidebar--nav-item-collapse-wrapper">
          <div class="DocsSidebar--nav-item-collapse-wrapperInner">
            <div class="DocsSidebar--nav-item-collapse-content">
              <ul class="DocsSidebar--nav-subnav" depth="2" style="--depth:2"><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/security/securing-data-at-rest/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Securing data at rest</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/security/securing-data-in-transit/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Securing data in transit</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/security/securing-data-in-use/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Securing data in use</span></a></li></ul>
            </div>
          </div>
        </div>
      </div></li><li class="DocsSidebar--nav-item"><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex="-1">
      <span class="DocsSidebar--nav-expand-collapse-button-content" aria-hidden="true"></span>
      <span is-visually-hidden>Expand: Serverless</span>
    </button><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/serverless/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Serverless</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style="min-height:0px;"><div class="DocsSidebar--nav-item-collapse-wrapper">
          <div class="DocsSidebar--nav-item-collapse-wrapperInner">
            <div class="DocsSidebar--nav-item-collapse-content">
              <ul class="DocsSidebar--nav-subnav" depth="2" style="--depth:2"><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/serverless/a-b-testing-using-workers/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">A/B-testing using Workers</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/serverless/fullstack-application/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Fullstack Applications</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/serverless/serverless-etl/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Serverless ETL pipelines</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/serverless/serverless-global-apis/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Serverless global APIs</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/serverless/serverless-image-content-management/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Serverless image content management</span></a></li></ul>
            </div>
          </div>
        </div>
      </div></li><li class="DocsSidebar--nav-item"><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex="-1">
      <span class="DocsSidebar--nav-expand-collapse-button-content" aria-hidden="true"></span>
      <span is-visually-hidden>Expand: Storage</span>
    </button><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/storage/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Storage</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style="min-height:0px;"><div class="DocsSidebar--nav-item-collapse-wrapper">
          <div class="DocsSidebar--nav-item-collapse-wrapperInner">
            <div class="DocsSidebar--nav-item-collapse-content">
              <ul class="DocsSidebar--nav-subnav" depth="2" style="--depth:2"><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/diagrams/storage/egress-free-storage-multi-cloud/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Egress-free object storage in multi-cloud setups</span></a></li></ul>
            </div>
          </div>
        </div>
      </div></li></ul>
            </div>
          </div>
        </div>
      </div></li><li class="DocsSidebar--nav-item"><button class="Button DocsSidebar--nav-expand-collapse-button">
      <span class="DocsSidebar--nav-expand-collapse-button-content" aria-hidden="true"></span>
      <span is-visually-hidden>Expand: Design Guides</span>
    </button><a class="DocsSidebar--nav-link"  href="/reference-architecture/design-guides/"  >
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Design Guides</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style="min-height:0px;"><div class="DocsSidebar--nav-item-collapse-wrapper">
          <div class="DocsSidebar--nav-item-collapse-wrapperInner">
            <div class="DocsSidebar--nav-item-collapse-content">
              <ul class="DocsSidebar--nav-subnav" depth="1" style="--depth:1"><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/design-guides/zero-trust-for-startups/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Building zero trust architecture into your startup</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/reference-architecture/design-guides/secure-application-delivery/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Secure application delivery</span></a></li></ul>
            </div>
          </div>
        </div>
      </div></li></ul>
      </div>
      <div style="position:absolute;height:6px;display:none;right:2px;bottom:2px;left:2px;border-radius:3px">
        <div style="position:relative;display:block;height:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)"></div>
      </div>
      <div style="position:absolute;width:6px;display:none" class="Scrollbars--track Scrollbars--track-vertical">
        <div style="position:relative;display:block;width:100%" class="Scrollbars--thumb Scrollbars--thumb-vertical"></div>
      </div>
    </div>
  </div>
  <div class="DocsSidebar--shadow"></div>
</div><div class="DocsToolbar">

<div class="DocsToolbar--search">
  <div class="DocsSearch">
    <div id="algolia"></div>
  </div>
</div>
<div class="DocsToolbar--tools"><div class="Tooltip---root">
  <a class="DocsToolbar--feedback Button Button-is-docs-secondary" href="https://github.com/cloudflare/cloudflare-docs/blob/production/content/reference-architecture/architectures/sase.md" target="_blank">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
      <path d="M22.742 47.456L23.757 46.912L52.175 18.573V15.743L42.254 5.823H39.428L11.012 34.16L10.461 35.193L8.03899 47.614L10.399 49.957L22.742 47.456ZM14.27 36.56L40.84 10.06L47.932 17.152L21.358 43.652L12.538 45.439L14.27 36.56Z" fill="currentColor"/>
      <path d="M56.002 54H7.99799V58H56.002V54Z" fill="currentColor"/>
      </svg>Edit
  </a>
  <span class="Tooltip" role="tooltip" position="bottom-end">
    Edit this page
  </span>
</div>
  <div class="DocsToolbar--tools-spacer"></div>
  <div class="Tooltip---root">
  <a class="DocsToolbar--feedback Button Button-is-docs-secondary" href="https://github.com/cloudflare/cloudflare-docs/issues/new/choose" target="_blank">
    <svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 17">
      <path d="M14 2.5H2l-.5.5v11.165l.863.345 2.852-3.01H14l.5-.5V3l-.5-.5Zm-.5 8H4.785L2.5 12.911V3.5h11v7Z"
        fill="currentColor"></path>
      <path d="M12.5 5.003h-9v1h9v-1ZM12.5 7.5h-9v1h9v-1Z" fill="currentColor"></path>
    </svg>Issue
  </a>
  <span class="Tooltip" role="tooltip" position="bottom-end">
    Report an issue with this page
  </span>
  </div>

  <div class="DocsToolbar--tools-spacer"></div>
  <div class="Tooltip---root">
  <a class="DocsToolbar--feedback Button Button-is-docs-primary" href="https://dash.cloudflare.com/login" target="_blank">
    <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64">
      <path d="M36.85 34.76H27.17C21.5587 34.7653 16.1786 36.996 12.2099 40.9629C8.24121 44.9297 6.00794 50.3087 6 55.92L8 57.92H56L58 55.92C57.9921 50.3122 55.7615 44.9362 51.7972 40.9699C47.8328 37.0037 42.4578 34.7706 36.85 34.76ZM10.12 53.92C10.6165 49.7453 12.6256 45.8972 15.7674 43.1037C18.9092 40.3102 22.9659 38.7648 27.17 38.76H36.85C41.0455 38.777 45.09 40.3278 48.2213 43.1202C51.3526 45.9126 53.3546 49.7538 53.85 53.92H10.12Z" fill="currentColor"/>
      <path d="M32.05 32C34.8189 32 37.5257 31.1789 39.828 29.6406C42.1303 28.1022 43.9247 25.9157 44.9843 23.3576C46.0439 20.7994 46.3212 17.9845 45.781 15.2687C45.2408 12.553 43.9074 10.0584 41.9495 8.10051C39.9916 6.14258 37.497 4.80921 34.7813 4.26901C32.0655 3.72882 29.2506 4.00607 26.6924 5.06569C24.1343 6.12532 21.9478 7.91973 20.4094 10.222C18.8711 12.5243 18.05 15.2311 18.05 18C18.05 21.713 19.525 25.274 22.1505 27.8995C24.776 30.525 28.337 32 32.05 32ZM32.05 8.00001C34.0278 8.00001 35.9612 8.5865 37.6057 9.68531C39.2502 10.7841 40.5319 12.3459 41.2888 14.1732C42.0457 16.0004 42.2437 18.0111 41.8579 19.9509C41.472 21.8907 40.5196 23.6725 39.1211 25.0711C37.7225 26.4696 35.9407 27.422 34.0009 27.8079C32.0611 28.1937 30.0504 27.9957 28.2232 27.2388C26.3959 26.4819 24.8341 25.2002 23.7353 23.5557C22.6365 21.9112 22.05 19.9778 22.05 18C22.05 15.3478 23.1036 12.8043 24.9789 10.9289C26.8543 9.05357 29.3978 8.00001 32.05 8.00001Z"  fill="currentColor"/>
      </svg>Log&nbsp;in
  </a>
  <span class="Tooltip" role="tooltip" position="bottom-end">
    Log into the Cloudflare dashboard
  </span>
  </div>
  

  <div class="DocsToolbar--tools-spacer"></div>

  <div class="DocsToolbar--theme-toggle">
    <button id="MobileSearch" onclick='document.querySelector(".DocSearch.DocSearch-Button").click()'>
      <svg viewBox="0 0 16 16" fill="currentColor" role="img" aria-labelledby="title-9701125841014673"
        xmlns="http://www.w3.org/2000/svg">
        <title id="title-9701125841014673">Search icon (depiction of a magnifying glass)</title>
        <path
          d="M11.999 10.585l3.458 3.458a1 1 0 01-1.414 1.414L10.585 12a6.5 6.5 0 111.414-1.414zM6.75 11.5a4.75 4.75 0 100-9.5 4.75 4.75 0 000 9.5z">
        </path>
      </svg>
    </button><div class="Tooltip---root">
  <div class="ThemeToggle">
    <input type="checkbox" id="ThemeToggle" class="ThemeToggle--input">

    <label class="ThemeToggle--toggle" for="ThemeToggle">
      <div class="ThemeToggle--toggle-handle"></div>

      <div class="ThemeToggle--toggle-handle-icon ThemeToggle--sun">
        <svg viewBox="0 0 16 16" fill="currentColor" role="img" aria-labelledby="title-8812071124069258"
          xmlns="http://www.w3.org/2000/svg">
          <title id="title-8812071124069258">Light theme icon (depiction of a sun)</title>
          <path
            d="M7.5 11.465a3.482 3.482 0 01-1.596-.662L4.11 12.596a.5.5 0 01-.707-.707l1.793-1.793A3.482 3.482 0 014.535 8.5H2a.5.5 0 010-1h2.535a3.482 3.482 0 01.662-1.596L3.404 4.11a.5.5 0 01.707-.707l1.793 1.793A3.482 3.482 0 017.5 4.535V2a.5.5 0 011 0v2.535a3.482 3.482 0 011.596.662l1.793-1.793a.5.5 0 01.707.707l-1.793 1.793c.343.458.577 1.003.662 1.596H14a.5.5 0 110 1h-2.535a3.482 3.482 0 01-.662 1.596l1.793 1.793a.5.5 0 01-.707.707l-1.793-1.793a3.482 3.482 0 01-1.596.662V14a.5.5 0 11-1 0v-2.535z">
          </path>
        </svg>
      </div>

      <div class="ThemeToggle--toggle-handle-icon ThemeToggle--moon">
        <svg viewBox="0 0 16 16" fill="currentColor" role="img" aria-labelledby="title-5971296394189265"
          xmlns="http://www.w3.org/2000/svg">
          <title id="title-5971296394189265">Dark theme icon (depiction of a moon)</title>
          <path d="M7.067 3.087a5 5 0 005.466 7.026 5 5 0 11-5.466-7.026z"></path>
        </svg>
      </div>
    </label>

    <span class="Tooltip" id="ThemeToggle--tooltip" role="tooltip" position="bottom-end">Set theme to dark (⇧+D)</span>
  </div>
</div></div>
</div>
</div>

    <main class="DocsBody"><div class="DocsBody--sidebar" with-styled-webkit-scrollbars="">
  <div class="DocsBody--sidebar-content-scroll-fade"></div>
  <div class="DocsBody--sidebar-content">
      <ul class="DocsTableOfContents" hidden>
        <li><a class="DocsTableOfContents-link" href="#docs-content">↑ Top</a></li>
      </ul>
  </div>
</div>
<div id="docs-content" data-reach-skip-nav-content></div>
<ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a href="/products/" class="DocsMarkdown--link" itemprop="item">
        <span itemprop="name" class="DocsMarkdown--link-content">Products</span></a>
      <meta itemprop="position" content="1" />
    </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/reference-architecture/" itemprop="item" class="DocsMarkdown--link" >
            <span class="DocsMarkdown--link-content"  itemprop="name" >Reference Architecture</span></a><meta itemprop="position" content="2" />
        </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/reference-architecture/architectures/" itemprop="item" class="DocsMarkdown--link" >
            <span class="DocsMarkdown--link-content"  itemprop="name" >Reference Architectures</span></a><meta itemprop="position" content="3" />
        </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/reference-architecture/architectures/sase/" itemprop="item" class="DocsMarkdown--link" >
            <span class="DocsMarkdown--link-content"  itemprop="name" >Secure Access Service Edge (SASE)</span></a><meta itemprop="position" content="4" />
        </li></ol><div class="DocsContent" id="main" page-type="document">

        <article class="DocsMarkdown">
  <h1 id="evolving-to-a-sase-architecture-with-cloudflare">Evolving to a SASE architecture with Cloudflare</h1><p>Download a <a href=/reference-architecture/static/cloudflare-evolving-to-a-sase-architecture.pdf class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">PDF version</span></a> of this reference architecture.</p>
<h2 id="introduction">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#introduction">&#8203;​</a>
    </span>
    <span>Introduction</span>
  </h2><p>Cloudflare One is a secure access service edge (SASE) platform that protects enterprise applications, users, devices, and networks. By progressively adopting Cloudflare One, organizations can move away from their patchwork of hardware appliances and other point solutions and instead consolidate security and networking capabilities on one unified control plane. Such network and security transformation helps address key challenges modern businesses face, including:</p>
<ul>
<li>Securing access for any user to any resource with Zero Trust practices</li>
<li>Defending against cyber threats, including multi-channel phishing and ransomware attacks</li>
<li>Protecting data in order to comply with regulations and prevent leaks</li>
<li>Simplifying connectivity across offices, data centers, and cloud environments</li>
</ul>
<p>Cloudflare One is built on Cloudflare&rsquo;s <a href="https://www.cloudflare.com/connectivity-cloud/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">connectivity cloud</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>, ​​a unified, intelligent platform of programmable cloud-native services that enable any-to-any connectivity between all networks (enterprise and Internet), cloud environments, applications, and users. It is one of the <a href="https://www.cloudflare.com/network/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">largest global networks</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>, with data centers spanning <a href="https://www.cloudflare.com/network/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">hundreds of cities worldwide</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> and interconnection with over 12,500 other networks. It also has a greater presence in <a href="https://bgp.he.net/report/exchanges#_participants" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">core Internet exchanges</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> than many other large technology companies.</p>
<p>As a result, Cloudflare operates within ~50 ms of ~95% of the world&rsquo;s Internet-connected population. And since all Cloudflare services are designed to run across every network location, all traffic is connected, inspected, and filtered close to the source for the best performance and consistent user experience.</p>
<p>This document describes a reference architecture for organizations working towards a SASE architecture, and shows how Cloudflare One enables such security and networking transformation.</p>
<h3 id="who-is-this-document-for-and-what-will-you-learn">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#who-is-this-document-for-and-what-will-you-learn">&#8203;​</a>
    </span>
    <span>Who is this document for and what will you learn?</span>
  </h3><p>This reference architecture is designed for IT or security professionals with some responsibility over or familiarity with their organization&rsquo;s existing infrastructure. It is useful to have some experience with technologies important to securing hybrid work, including identity providers (IdPs), user directories, single sign on (SSO), endpoint security or management (EPP, XDR, UEM, MDM), firewalls, routers, and point solutions like packet or content inspection hardware, threat prevention, and data loss prevention technologies.</p>
<p>To build a stronger baseline understanding of Cloudflare, we recommend the following resources:</p>
<ul>
<li>What is Cloudflare? | <a href="https://www.cloudflare.com/what-is-cloudflare/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Website</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> (5 minute read) or <a href=/fundamentals/concepts/what-is-cloudflare/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">video</span></a> (2 minutes)</li>
</ul>

<ul>
<li>Solution Brief: <a href="https://cfl.re/SASE-SSE-platform-brief" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Cloudflare One</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> (3 minute read)</li>
<li>Whitepaper: <a href="https://cfl.re/internet-native-transformation-wp" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Reference Architecture for Internet-Native Transformation</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> (10 minute read)</li>
<li>Blog: <a href="https://blog.cloudflare.com/zero-trust-sase-and-sse-foundational-concepts-for-your-next-generation-network/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Zero Trust, SASE, and SSE: foundational concepts for your next-generation network</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> (14 minute read)</li>
</ul>
<p>Those who read this reference architecture will learn:</p>
<ul>
<li>How Cloudflare One protects an organization&rsquo;s employees, devices, applications, data, and networks</li>
<li>How Cloudflare One fits into your existing infrastructure, and how to approach migration to a SASE architecture</li>
<li>How to plan for deploying Cloudflare One</li>
</ul>
<p>While this document examines Cloudflare One at a technical level, it does not offer fine detail about every product in the platform. Instead, it looks at how all the services in Cloudflare One enable networking and network security to be consolidated on one architecture. Visit the <a href=https://developers.cloudflare.com/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">developer documentation</span></a> for further information specific to a product area or use case.</p>
<h2 id="disintegration-of-the-traditional-network-perimeter">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#disintegration-of-the-traditional-network-perimeter">&#8203;​</a>
    </span>
    <span>Disintegration of the traditional network perimeter</span>
  </h2><p>Traditionally, most employees worked in an office and connected locally to the company network via Ethernet or Wi-Fi. Most business systems (e.g. file servers, printers, applications) were located on and accessible only from this internal network. Once connected, users would typically have broad access to local resources. A security perimeter was created around the network to protect against outsider threats, most of which came from the public Internet. The majority of business workloads were hosted on-premises and only accessible inside the network, with very little or no company data or applications existing on the Internet.</p>
<p>However, three important trends created problems for this &ldquo;castle and moat&rdquo; approach to IT security:</p>
<ol>
<li><strong>Employees became more mobile</strong>. Organizations increasingly embrace remote / hybrid work and support the use of personal (i.e. not company-owned) devices.</li>
<li><strong>Cloud migration accelerated</strong>. Organizations are moving applications, data, and infrastructure from expensive on-premises data centers to public or private cloud environments in order to improve flexibility, scalability, and cost-effectiveness.</li>
<li><strong>Cyber threats evolved</strong>. The above trends expand an organization&rsquo;s attack surface. For example, attack campaigns have become more sophisticated and persistent in exploiting multiple channels to infiltrate organizations, and cybercriminals face lower barriers to entry with the popularity of the &ldquo;cybercrime-as-a-service&rdquo; black market.</li>
</ol>
<p>Traditional perimeter-based security has struggled to adapt to these changes. In particular, extending the &ldquo;moat&rdquo; outwards has introduced operational complexity for administrators, poor experiences for users, and inconsistency in how security controls are applied across users and applications.</p>
<p><figure class="image-caption">
    <img alt="With many different methods to connect networks and filter/block traffic, managing access to company applications is costly and time consuming." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-1.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<p>The diagram above shows an example of this adapted perimeter-based approach, in which a mix of firewalls, WAN routers, and VPN concentrators are connected with dedicated WAN on-ramps consisting of MPLS circuits and/or leased lines. The diagram also demonstrates common problem areas. In an effort to centralize policy, organizations sometimes force all employee Internet traffic through their VPN infrastructure, which results in slow browsing and user complaints. Employees then seek workarounds — such as using non-approved devices — which increases their exposure to Internet-borne attacks when they work from home or on public Wi-Fi. In addition, IT teams are unable to respond quickly to changing business needs due to the complexity of their network infrastructure.</p>
<p>Such challenges are driving many organizations to prioritize goals like:</p>
<ul>
<li>Accelerating business agility by supporting remote / hybrid work with secure any-to-any access</li>
<li>Improving productivity by simplifying policy management and by streamlining user experiences</li>
<li>Reducing cyber risk by protecting users and data from phishing, ransomware, and other threats across all channels</li>
<li>Consolidating visibility and controls across networking and security</li>
<li>Reducing costs by replacing expensive appliances and infrastructure (e.g. VPNs, hardware firewalls, and MPLS connections)</li>
</ul>
<h2 id="understanding-a-sase-architecture">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#understanding-a-sase-architecture">&#8203;​</a>
    </span>
    <span>Understanding a SASE architecture</span>
  </h2><p>In recent years, <a href="https://www.cloudflare.com/learning/access-management/security-service-edge-sse/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">secure access service edge</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>, or SASE, has emerged as an aspirational architecture to help achieve these goals. In a SASE architecture, network connectivity and security are unified on a single cloud platform and control plane for consistent visibility, control, and experiences from any user to any application.</p>
<p>SASE platforms consist of networking and security services, all underpinned by supporting operational services and a policy engine:</p>
<ul>
<li>Network services forward traffic from a variety of networks into a single global corporate network. These services provide capabilities like firewalling, routing, and load balancing.</li>
<li>Security services apply to traffic flowing over the network, allowing for filtering of certain types of traffic and control over who can access what.</li>
<li>Operational services provide platform-wide capabilities like logging, API access, and comprehensive Infrastructure-as-Code support through providers like Terraform.</li>
<li>A policy engine integrates across all services, allowing admins to define policies which are then applied across all the connected services.</li>
</ul>
<p><figure class="image-caption">
    <img alt="Cloudflare&amp;rsquo;s SASE cloud platform offers network, security, and operational services, as well as policy engine features, to provide zero trust connectivity between a variety of user identities, devices and access locations to customer applications, infrastructure and networks." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-2.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<h2 id="cloudflare-one-single-vendor-single-network-sase">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#cloudflare-one-single-vendor-single-network-sase">&#8203;​</a>
    </span>
    <span>Cloudflare One: single-vendor, single-network SASE</span>
  </h2><p>Most organizations move towards a SASE architecture progressively rather than all at once, prioritizing key security and connectivity use cases and adopting services like <a href="https://www.cloudflare.com/learning/access-management/what-is-ztna/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Zero Trust Network Access</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> (ZTNA) or <a href="https://www.cloudflare.com/learning/access-management/what-is-a-secure-web-gateway/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Secure Web Gateway</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> (SWG). Some organizations choose to use SASE services from multiple vendors. For most organizations, however, the aspiration is to consolidate security with a single vendor, in order to achieve simplified management, comprehensive visibility, and consistent experiences.</p>
<p><a href="https://www.cloudflare.com/cloudflare-one/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Cloudflare One</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> is a single-vendor SASE platform where all services are designed to run across all locations. All traffic is inspected closest to its source, which delivers consistent speed and scale everywhere. And thanks to composable and flexible on-ramps, traffic can be routed from any source to reach any destination.</p>
<p>Cloudflare&rsquo;s connectivity cloud also offers many other services that improve application performance and security, such as <a href="https://www.cloudflare.com/learning/security/api/what-is-an-api-gateway/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">API Gateway</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>, <a href="https://www.cloudflare.com/learning/ddos/glossary/web-application-firewall-waf/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Web Application Firewall</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>, <a href="https://www.cloudflare.com/learning/cdn/what-is-a-cdn/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Content Delivery</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>, or <a href="https://www.cloudflare.com/learning/ddos/ddos-mitigation/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">DDoS mitigation</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>, all of which can complement an organization&rsquo;s SASE architecture. For example, our Content Delivery Network (CDN) features can be used to improve the performance of a self hosted company intranet. Cloudflare&rsquo;s full range of services are illustrated below.</p>
<p><figure class="image-caption">
    <img alt="Cloudflare&amp;rsquo;s Anycast Network allows provides services on all connected servers to enable secure connections on public and home networks and at corporate offices." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-4.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<h3 id="cloudflares-anycast-network">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#cloudflares-anycast-network">&#8203;​</a>
    </span>
    <span>Cloudflare&rsquo;s Anycast Network</span>
  </h3><p>Cloudflare&rsquo;s SASE platform benefits from our use of <a href="https://www.cloudflare.com/learning/cdn/glossary/anycast-network/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Anycast</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> technology. Anycast allows Cloudflare to announce the IP addresses of our services from every data center worldwide, so traffic is always routed to the Cloudflare data center closest to the source. This means traffic inspection, authentication, and policy enforcement take place close to the end user, leading to consistently high-quality experiences.</p>
<p>Using Anycast ensures the Cloudflare network is well balanced. If there is a sudden increase in traffic on the network, the load can be distributed across multiple data centers – which in turn, helps maintain consistent and reliable connectivity for users. Further, Cloudflare&rsquo;s large <a href="https://www.cloudflare.com/network/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">network capacity</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> and <a href="https://blog.cloudflare.com/meet-traffic-manager/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">AI/ML-optimized smart routing</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> also help ensure that performance is constantly optimized.</p>
<p>By contrast, many other SASE providers use Unicast routing in which a single IP address is associated with a single server and/or data center. In many such architectures, a single IP address is then associated with a specific application, which means requests to access that application may have very different network routing experiences depending on how far that traffic needs to travel. For example, performance may be excellent for employees working in the office next to the application&rsquo;s servers, but poor for remote employees or those working overseas. Unicast also complicates scaling traffic loads —  that single service location must ramp up resources when load increases, whereas Anycast networks can share traffic across many data centers and geographies.</p>
<p><figure class="image-caption">
    <img alt="Cloudflare&amp;rsquo;s Anycast network ensures fast and reliable connectivity, whereas Unicast routing often sends all traffic to a single IP address, resulting in slower and failure prone connections." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-5.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<h2 id="deploying-a-sase-architecture-with-cloudflare">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#deploying-a-sase-architecture-with-cloudflare">&#8203;​</a>
    </span>
    <span>Deploying a SASE architecture with Cloudflare</span>
  </h2><p>To understand how SASE fits into an organization&rsquo;s IT infrastructure, see the diagram below, which maps out all the common components of said infrastructure. Subsequent sections of this guide will add to the diagram, showing where each part of Cloudflare&rsquo;s SASE platform fits in.</p>
<p><figure class="image-caption">
    <img alt="Typical enterprise IT infrastructure may consist of different physical locations, devices and data centers that require connectivity to multiple cloud and on-premises applications." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-6.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<p>In the diagram&rsquo;s top half there are a variety of Internet resources (e.g. Facebook), SaaS applications (e.g. ServiceNow), and applications running in an <a href="https://www.cloudflare.com/learning/cloud/what-is-iaas/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">infrastructure-as-a-service (IaaS)</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> platform (e.g. AWS). This example organization has already deployed cloud based <a href="https://www.cloudflare.com/learning/access-management/what-is-an-identity-provider/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">identity providers</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> (IdP), <a href="https://www.cloudflare.com/learning/security/glossary/what-is-endpoint/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">unified endpoint management</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> (UEM) and endpoint protection platforms (EPP) as part of a Zero Trust initiative.</p>
<p>In the bottom half are a variety of users, devices, networks, and locations. Users work from a variety of locations: homes, headquarters and branch offices, airports, and others. The devices they use might be managed by the organization or may be personal devices. In addition to the cloud, applications run in a data center in the organization&rsquo;s headquarters and in a data center operators&rsquo; colo facility (<a href="https://www.equinix.com/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Equinix</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>, in this example).</p>
<p>A SASE architecture will define, secure, and streamline how each user and device will connect to the various resources in the diagram. Over the following sections, this guide will show ways to integrate Cloudflare One into the above infrastructure:</p>
<ul>
<li><strong>Applications and services</strong>: Placing access to private applications and services behind Cloudflare</li>
<li><strong>Networks</strong>: Connecting entire networks to Cloudflare</li>
<li><strong>Forwarding device traffic</strong>: Facilitating access to Cloudflare-protected resources from any device</li>
<li><strong>Verifying users and devices</strong>: Identifying which users access requests come from, and which devices those users have</li>
</ul>
<h3 id="connecting-applications">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#connecting-applications">&#8203;​</a>
    </span>
    <span>Connecting applications</span>
  </h3><p>This journey to a SASE architecture starts with an organization needing to provide remote access to non-Internet facing, internal-only web applications and services (e.g. SSH or RDP). Organizations typically deploy VPN appliances to connect users to the company network where the applications are hosted. However, many applications now live in cloud Infrastructure-as-a-Service platforms, where traditional VPN solutions are hard to configure. This often results in poor application and connectivity performance for users.</p>
<h4 id="tunnels-to-self-hosted-applications">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#tunnels-to-self-hosted-applications">&#8203;​</a>
    </span>
    <span>Tunnels to self-hosted applications</span>
  </h4><p><a href="https://www.cloudflare.com/learning/access-management/what-is-ztna/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Zero Trust Network Access</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> (ZTNA) is a SASE service that secures access to self-hosted applications and services. ZTNA functionality can be divided broadly into two categories: 1) establishing connectivity between Cloudflare&rsquo;s network and the environments where the applications are running, and 2) setting policies to define how users are able to access these applications. In this section, we first examine the former — how to connect apps to Cloudflare.</p>
<p>Connectivity to self-hosted applications is facilitated through tunnels that are created and maintained by a software connector,
<a href=/cloudflare-one/connections/connect-networks/get-started/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content"><code>cloudflared</code></span></a>. <code>cloudflared</code> is a lightweight daemon installed in an organizations&rsquo; infrastructure that creates a tunnel via an outbound connection to Cloudflare&rsquo;s global network. The connector can be installed in a variety of ways:</p>
<ul>
<li>In the OS installed on the bare metal server</li>
<li>In the OS that is running in a virtualized environment</li>
<li>In a <a href="https://hub.docker.com/r/cloudflare/cloudflared" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">container</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> running in a Docker or Kubernetes environment</li>
</ul>
<p><code>cloudflared</code> runs on Windows, Linux, or macOS operating systems and creates an encrypted tunnel using QUIC, a modern protocol that uses UDP (instead of TCP) for fast tunnel performance and modern encryption standards. Generally speaking, there are two approaches for how users can deploy <code>cloudflared</code> in their environment:</p>
<ol>
<li><strong>On the same server and operating system where the application or service is running</strong>. This is typically in high-risk or compliance deployments where organizations require independent tunnels per application. <code>cloudflared</code> consumes a small amount of CPU and RAM, so impact to server performance is marginal.</li>
<li><strong>On a dedicated server(s) in the same network where the applications run</strong>. This often takes the form of multiple containers in a Docker or Kubernetes environment.</li>
</ol>
<p><code>cloudflared</code> manages multiple outbound connections back to Cloudflare and usually requires no changes to network firewalls. Those connections are spread across servers in more than one Cloudflare data center for reliability and failover. Traffic destined for a tunnel is forwarded to the connection that is geographically closest to the request, and if a <code>cloudflared</code> connection isn&rsquo;t responding, the tunnel will automatically failover to the next available.</p>
<p>For more control over the traffic routed through each tunnel connection, users can integrate with the Cloudflare <a href=/cloudflare-one/connections/connect-networks/routing-to-tunnel/lb/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">load balancing</span></a> service. To ensure reliable local connectivity, organizations should deploy more than one instance of <code>cloudflared</code> across their application infrastructure. For example, with ten front-end web servers running in a Kubernetes cluster, you might deploy three kubernetes services <a href=/cloudflare-one/tutorials/many-cfd-one-tunnel/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">running <code>cloudflared</code> replicas</span></a>.</p>
<p><figure class="image-caption">
    <img alt="Using cloudflared, multiple outbound connections are created back to Cloudflare across multiple data centers to improve overall performance and reliability." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-7.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<p>Once tunnels have been established, there are two methods for how user traffic is forwarded to your application or service. Each method below is protected by policies managed by the ZTNA service that enforces authentication and access (which will be explored in further depth <a href=#secure-access-to-self-hosted-apps-and-services class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">later in this document</span></a>).</p>
<h5 id="public-hostname">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#public-hostname">&#8203;​</a>
    </span>
    <span>Public hostname</span>
  </h5><p>Each public hostname is specific to an address, protocol, and port associated with a private application, allowing for narrow access to a specific service when there might be multiple applications running on the same host.</p>
<p>For example, organizations can define a public hostname (<code>mywebapp.domain.com</code>) to provide access to a web server running on <code>https://localhost:8080</code>, while ensuring no access to local Kubernetes services.</p>
<p>Key capabilities:</p>
<ul>
<li>A hostname is created in a public DNS zone and all requests to that hostname are first routed to the Cloudflare network, inspected against configured security and access policies, before being routed through the tunnel to the secured private resource</li>
<li>Multiple hostnames can be defined per tunnel, with each hostname mapping to a single application (service address and port)</li>
<li>Support for HTTP/HTTPS protocols</li>
<li>Access to resources only requires a browser</li>
<li>When Cloudflare&rsquo;s device client is deployed on an user device, policies can leverage additional contextual signals (e.g. determining whether the device is managed or running the latest OS) in policy enforcement</li>
<li>For access to SSH/VNC services, Cloudflare renders an SSH/VNC terminal using webassembly in the browser</li>
</ul>
<p>Applications exposed this way receive all of the benefits of Cloudflare&rsquo;s leading DNS, CDN, and DDoS services as well as our web application firewall (WAF), API, and bot services, all without exposing application servers directly to the Internet.</p>
<h5 id="private-network">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#private-network">&#8203;​</a>
    </span>
    <span>Private network</span>
  </h5><p>In some cases, users may want to leverage ZTNA policies to provide access to many applications on an entire private network. This allows for greater flexibility over the ways clients connect and how services are exposed. It also enables communication to resources over protocols other than HTTP. In this scenario, users specify the subnet for the private network they wish to be accessible via Cloudflare.</p>
<p>Key capabilities:</p>
<ul>
<li><code>cloudflared</code>, combined with Cloudflare device agent, provides access to private networks, allowing for any arbitrary L4 TCP, UDP or ICMP connections</li>
<li>One or many networks can be configured using CIDR notation (e.g. 172.21.0.16/28)</li>
<li>Access to resources on the private network requires the Cloudflare device agent to be installed on clients, and at least one Cloudflare Tunnel server on the connecting network</li>
</ul>
<p>For both methods, it is important to note that <code>cloudflared</code> only proxies inbound traffic to a private application or network. It does not become a gateway or &ldquo;on-ramp&rdquo; back to Cloudflare for the network that it proxies inbound connections to. This means that if the web server starts its own connection to another Internet-based API, that connection will not be routed via Cloudflare Tunnel and will instead be routed via the host server&rsquo;s default route and gateway.</p>
<p>This is the desirable outcome in most network topologies, but there are some instances in which network services need to communicate directly with a remotely-connected user, or with services on other segmented networks.</p>
<p>If users require connections that originate from the server or network to be routed through Cloudflare, there are multiple on-ramps through which to achieve this, which will be explained further in the &ldquo;Connecting Networks&rdquo; section.</p>
<h4 id="saas-applications">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#saas-applications">&#8203;​</a>
    </span>
    <span>SaaS applications</span>
  </h4><p>SaaS applications are inherently always connected to and accessed via the public Internet. As a result, the aforementioned tunnel-and-app-connector approach does not apply. Instead, organizations with a SASE architecture inspect and enforce policies on Internet-bound SaaS traffic via a <a href="https://www.cloudflare.com/learning/access-management/what-is-a-secure-web-gateway/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">secure web gateway</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> (SWG), which serves as a cloud-native forward proxy.</p>
<p>The SWG includes policies that examine outbound traffic requests and inbound content responses to determine if the user, device, or network location has access to resources on the Internet. Organizations can use these policies to control access to approved SaaS applications, as well as detect and block the use of unapproved applications (also known as <a href="https://www.cloudflare.com/learning/access-management/what-is-shadow-it/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">shadow IT</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>).</p>
<p>Some SaaS applications allow organizations to configure an IP address allowlist, which limits access to the application based on the source IP address of the request. With Cloudflare, organizations can obtain dedicated <a href=/cloudflare-one/policies/gateway/egress-policies/dedicated-egress-ips/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">egress IP</span></a> addresses, which can be used as the source address for all traffic leaving their network. When combined with an allowlist in a SaaS application, organizations can ensure that users are only able to access applications if they are first connected to Cloudflare. (More detail on this approach is outlined in a later section about connecting user devices.)</p>
<p>Another method to secure access to SaaS applications is to configure single sign-on (SSO) so that Cloudflare becomes an identity proxy — acting as the identity provider (IDP) — as part of the authentication and authorization process.</p>
<p>Key capabilities:</p>
<ul>
<li>Apply consistent access policies across both self-hosted and SaaS applications</li>
<li>Layer device security posture into the authentication process (e.g. users can ensure that only managed devices, running the latest operating system and passing all endpoint security checks, are able to access SaaS applications)</li>
<li>Ensure that certain network routes are used for access (e.g. users can require that devices are connected to Cloudflare using the device agent, which allows them to filter traffic to the SaaS application and prevent downloads of protected data)</li>
<li>Centralize SSO applications to Cloudflare and create one SSO integration from Cloudflare to their IdP — making both infrastructure and access policies SSO-agnostic (e.g. users can allow access to critical applications only when MFA is used, no matter which IdP is used to authenticate)</li>
</ul>
<p>When Cloudflare acts as the SSO service to an application, user authentication is still handled by an organization&rsquo;s existing identity provider, but is proxied via Cloudflare, where additional access restrictions can be applied. The diagram below is a high-level example of a typical request flow:</p>
<p><figure class="image-caption">
    <img alt="The flow of SSO requests is proxied through Cloudflare, where the IdP is still used to authenticate, but Cloudflare provides additional access controls." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-8.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<p>The last method of connecting SaaS applications to Cloudflare&rsquo;s SASE architecture is with an API-based <a href="https://www.cloudflare.com/learning/access-management/what-is-a-casb/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">cloud access security broker</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> (CASB). The Cloudflare CASB integrates via API to <a href=/cloudflare-one/applications/scan-apps/casb-integrations/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">popular SaaS suites</span></a> — including Google Workspace, Microsoft 365, Salesforce, and more — and continuously scans these applications for misconfigurations, unauthorized user activity, and other security risks.</p>
<p>Native integration with the Cloudflare <a href="https://www.cloudflare.com/learning/access-management/what-is-dlp/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">data loss prevention</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> (DLP) service enables CASB to scan for sensitive or regulated data that may be stored in files with incorrect permissions — further risking leaks or unauthorized access. CASB reports findings that alert IT teams to items such as:</p>
<ul>
<li>Administrative accounts without adequate MFA</li>
<li>Company-sensitive data in files stored with public access permissions</li>
<li>Missing application configurations (e.g. domains missing SPF/DMARC records)</li>
</ul>
<h4 id="checkpoint-connecting-applications-to-cloudflare">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#checkpoint-connecting-applications-to-cloudflare">&#8203;​</a>
    </span>
    <span>Checkpoint: Connecting applications to Cloudflare</span>
  </h4><p>Now, this is what the architecture of a typical organization might look like once they have integrated with Cloudflare services. It is important to note that Cloudflare is designed to secure organizations&rsquo; existing applications and services in the following ways:</p>
<ul>
<li>All self-hosted applications and services are only accessible through Cloudflare and controlled by policies defined by the Cloudflare ZTNA</li>
<li>SaaS application traffic is filtered and secured via the Cloudflare SWG</li>
<li>SaaS services are scanned via the Cloudflare CASB to check for configuration and permissions of data at rest</li>
</ul>
<p><figure class="image-caption">
    <img alt="Access to all applications is now only available via Cloudflare." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-9.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<h3 id="connecting-networks">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#connecting-networks">&#8203;​</a>
    </span>
    <span>Connecting networks</span>
  </h3><p>Once an organization&rsquo;s applications and services have been integrated, it is time to connect Cloudflare to their existing networks. Regional offices, corporate headquarters, retail locations, data centers, and cloud-hosted infrastructure all need to forward traffic to the new corporate SASE network.</p>
<p>When all traffic flows through Cloudflare, SASE services perform the following actions:</p>
<ul>
<li>Granting application access</li>
<li>Filtering general Internet-bound traffic (e.g. blocking access to sites that host malware)</li>
<li>Isolating web sites to protect users from day-zero or unknown harmful Internet content</li>
<li>Filtering traffic to identify data defined by DLP policies — then blocking the download/upload of that data to insecure devices or applications</li>
<li>Providing visibility into the use of non-approved applications and allowing admins to either block or apply policies around their use</li>
</ul>
<p>There are several approaches for connecting networks to Cloudflare, which can provide further flexibility in how an organization provides access to SASE-protected resources:</p>
<ol>
<li><strong>Use software agents to create tunnels from host machines back to Cloudflare</strong>. This is typically the method favored by users who own their own servers and applications.</li>
<li><strong>Set up IPsec or GRE tunnels from network routers and firewalls to connect them to the Cloudflare WAN service</strong>. This is the approach that network administrators use when they want to forward traffic to and from entire networks.</li>
<li><strong>Connect a network directly to Cloudflare</strong>. This method works best when an organization&rsquo;s network resides in a supported data center, usually one that is colocated with a Cloudflare data center.</li>
</ol>
<p>These methods will be explained further in the next sections.</p>
<h4 id="using-software-agents">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#using-software-agents">&#8203;​</a>
    </span>
    <span>Using software agents</span>
  </h4><p>There are two software-based methods of connecting networks to Cloudflare, depending on the type of applications that currently exist on the network.</p>
<h5 id="client-to-server-connectivity">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#client-to-server-connectivity">&#8203;​</a>
    </span>
    <span>Client-to-server connectivity</span>
  </h5><p>As described in the previous section, <a href=/cloudflare-one/connections/connect-networks/private-net/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content"><code>cloudflared</code></span></a> proxies requests to applications and services on private networks. It installs on servers in the private network and creates secure tunnels to Cloudflare over the Internet. These connections are balanced across multiple Cloudflare data centers for reliability and can be made via multiple connectors, which helps increase the capacity of the tunnels.</p>
<p>Using <code>cloudflared</code>, Cloudflare Tunnel supports client to server connections over the Tunnel. Any service or application running behind the Tunnel will use the default routing table when initiating outbound connectivity.</p>
<p>This model is appropriate for a majority of scenarios, in which external users need to access resources within a private network that does not require bidirectionally-initiated communication.</p>
<p><figure class="image-caption">
    <img alt="Requests initiated from a client are securely tunneled to Cloudflare via a device agent, while requests from inside the private network follow the default route." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-10.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<p>For bidirectional, or meshed connectivity, organizations should use the WARP Connector.</p>
<h5 id="mesh-connectivity">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#mesh-connectivity">&#8203;​</a>
    </span>
    <span>Mesh connectivity</span>
  </h5><p>The <a href=/cloudflare-one/connections/connect-networks/private-net/warp-connector/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">WARP Connector</span></a> is a lightweight solution for site-to-site, bidirectional, and mesh networking connectivity that does not require changes to underlying network routing infrastructure. WARP Connector software is installed on a Linux server within an organization&rsquo;s network, which then becomes a gateway for other local networks that need to on-ramp traffic to Cloudflare.</p>
<p>This provides a lightweight solution to support services such as Microsoft&rsquo;s System Center Configuration Manager (SCCM), Active Directory server updates, VOIP and SIP traffic, and developer workflows with complex CI/CD pipeline interaction. It can either be run supplementally to <code>cloudflared</code> and Magic WAN, or can be a standalone remote access and site-to-site connector to the Cloudflare network.</p>
<p>The WARP Connector can proxy both user-to-network and network-to-network connectivity, or can be used to establish an overlay network of Carrier Grade NAT (<a href="https://en.wikipedia.org/wiki/Carrier-grade_NAT" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">CGNAT</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>) addressed endpoints to provide secure, direct connectivity to established resources using CGNAT IP ranges. This helps address overlapping network IP range challenges, point-solution access problems, or the process of shifting network design without impacting a greater underlying system.</p>
<p><figure class="image-caption">
    <img alt="In an example scenario, a developer might push code to a git repository, which ends up in a Kubernetes cluster in a staging network. From staging, it is accessed by a QA tester. All of this traffic is routed and protected via WARP Connector." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-11.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<p>Cloudflare Tunnel via <code>cloudflared</code> is the primary method for connecting users to applications and services on private networks because it is a simpler, more granular and agile solution for many application owners (vs. IP tunnel based connectivity technology, like <a href="https://www.cloudflare.com/learning/network-layer/what-is-ipsec/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">IPsec</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> and <a href="https://www.cloudflare.com/learning/network-layer/what-is-gre-tunneling/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">GRE</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>). Cloudflare Tunnel via WARP Connector is the preferred method for mesh or other software-defined networking — most of which require bidirectional connectivity — when organizations do not want to make changes to the underlying network routing or edge infrastructure.</p>
<h4 id="using-network-equipment">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#using-network-equipment">&#8203;​</a>
    </span>
    <span>Using network equipment</span>
  </h4><p>Where it is not optimal or possible to install software agents, networks can also be connected to Cloudflare using existing network equipment, such as routers and network firewalls. To do this, organizations create IPsec or GRE tunnels that connect to Cloudflare&rsquo;s cloud-native <a href="https://www.cloudflare.com/network-services/products/magic-wan/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Magic WAN</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> service. With Magic WAN, existing network hardware can connect and route traffic from their respective network locations to Cloudflare through a) secure, IPsec-based tunnels over the Internet or, b) across <a href="https://www.cloudflare.com/network-services/products/network-interconnect/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Cloudflare Network Interconnect</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> (CNI) — private, direct connections that link existing network locations to the nearest Cloudflare data center.</p>
<p>Cloudflare&rsquo;s WAN service uses a &ldquo;light-branch, heavy-cloud&rdquo; architecture that represents the evolution of software-defined WAN (SD-WAN) connectivity. With Magic WAN, as depicted in the network architecture diagram below, the Cloudflare global network functions as a centrally-managed connectivity hub that securely and efficiently routes traffic between all existing network locations:</p>
<p><figure class="image-caption">
    <img alt="Cloudflare&amp;rsquo;s Connectivity Cloud securely links a variety of network locations to the Internet through products such as Firewall, ZTNA, CASB and Load Balancer." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-12.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<p>As previously described, Cloudflare uses a routing technique called <a href="https://www.cloudflare.com/learning/cdn/glossary/anycast-network/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Anycast</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> to globally advertise all of the services and endpoints on the Cloudflare network, including the endpoints for WAN IP tunnels.</p>
<p>With <a href="https://blog.cloudflare.com/anycast-ipsec/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Anycast IPsec</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> or Anycast GRE tunnels, each tunnel configured from an organization&rsquo;s network device (e.g. edge router, firewall appliance, etc.) connects to hundreds of global Cloudflare data centers. Traffic sourced from an organization&rsquo;s network location is sent directly over these tunnels and always routes to the closest active Cloudflare data center. If the closest Cloudflare data center is unavailable, the traffic is automatically rerouted to the next-closest data center.</p>
<p><figure class="image-caption">
    <img alt="In an example scenario, IPsec traffic from an office network&amp;rsquo;s router would be sent to the closest Cloudflare data center." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-13.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<p>To further network resiliency, Magic WAN also supports Equal Cost Multi-Path (ECMP) routing between the Cloudflare network and an organization&rsquo;s network location(s). With ECMP, traffic can be load-balanced across multiple Anycast IP tunnels, which helps increase throughput and maximize network reliability. In the event of network path failure of one or more tunnels, traffic can be automatically failed over to the remaining healthy tunnels.</p>
<p>The simplest and easiest way to on-ramp existing network locations to the Magic WAN service is to deploy Cloudflare <a href="https://blog.cloudflare.com/magic-wan-connector/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Magic WAN Connector</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>: a plug-and-play, fully cloud-managed network device that can be deployed in any physical or cloud network. When the WAN Connector is installed into a network, it will automatically establish communication with the Cloudflare network, download and provision relevant configurations, establish resilient IPsec tunnels, and route connected site network traffic to Cloudflare.</p>
<p>The WAN Connector can be deployed as either a hardware or virtual appliance, making it versatile for a variety of user network environments — on-premises, virtual, or public cloud. Management, configuration, observability, and software updates for WAN Connectors is centrally managed from Cloudflare via either the dashboard or the Cloudflare API. As of 2023, the WAN Connector is currently best-suited for connecting small and medium-sized networks to Cloudflare (e.g. small offices and retail stores).</p>
<p>In situations where deploying the WAN Connector is not feasible or desirable, organizations can securely connect their site networks to Cloudflare by configuring IPsec tunnels from their existing IPsec-capable network devices, including WAN or SD-WAN routers, firewalls, and cloud VPN gateways. Please refer to the Cloudflare <a href=/magic-wan/configuration/manually/third-party/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">documentation</span></a> for up-to-date examples of validated IPsec devices.</p>
<p>There may also be situations where network-layer encryption is not necessary — for example, when a site&rsquo;s WAN-bound traffic is already encrypted at the application layer (via TLS), or when an IPsec network device offers very limited throughput performance as it encrypts and decrypts IPsec traffic. Under these circumstances, organizations can connect to the Cloudflare network using <a href=/magic-wan/configuration/manually/how-to/configure-tunnels/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">GRE tunnels</span></a>.</p>
<p>Organizations may also connect their network locations directly to the Cloudflare network via <a href="https://www.cloudflare.com/network-services/products/network-interconnect/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Cloudflare Network Interconnect</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> (CNI). Cloudflare <a href=/network-interconnect/about class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">supports a variety of options</span></a> to connect your network to Cloudflare:</p>
<ul>
<li>Express CNI for Magic WAN and Magic Transit</li>
<li>Classic CNI for Magic Transit</li>
<li>Cloud CNI for Magic WAN and Magic Transit</li>
<li>Peering via either an internet exchange, or a private network interconnect (PNI).</li>
</ul>
<p>The following table summarizes the different methods of connecting networks to Cloudflare:</p>
<table>
<thead>
<tr>
<th><strong>Use case</strong></th>
<th><strong>Recommended</strong></th>
<th><strong>Alternative solution</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Remote users connecting to applications on private networks in a Zero Trust model (e.g. most VPN replacement scenarios)</td>
<td><strong>Cloudflare Tunnel (with <code>cloudflared</code>)</strong></td>
<td><strong>Magic WAN</strong> Alternative option if <code>cloudflared</code> not suitable for environment</td>
</tr>
<tr>
<td>Site-to-site connectivity between branches, headquarters, and data centers</td>
<td><strong>Magic WAN</strong></td>
<td><strong>Cloudflare Tunnel (with WARP Connector)</strong> Alternative option if routing changes cannot be made at perimeter</td>
</tr>
<tr>
<td>Egress traffic from physical sites or cloud environments to cloud security inspection (e.g. most common SWG and branch firewall replacement scenarios)</td>
<td><strong>Magic WAN</strong></td>
<td><strong>N/A</strong></td>
</tr>
<tr>
<td>Service-initiated communication with remote users (e.g. AD or SCCM updates, DevOps workflows, VOIP)</td>
<td><strong>Cloudflare Tunnel (with WARP Connector)</strong></td>
<td><strong>Magic WAN</strong> Alternative option if inbound source IP fidelity not required</td>
</tr>
<tr>
<td>Mesh networking and peer-to-peer connectivity</td>
<td><strong>Cloudflare Tunnel (with WARP Connector)</strong></td>
<td><strong>N/A</strong></td>
</tr>
</tbody>
</table>
<p>Each of these methods of connecting and routing traffic can be deployed concurrently from any location. The following diagram highlights how different connectivity methods can be used in a single architecture.</p>
<p>Note the following traffic flows:</p>
<ul>
<li>All traffic connected via a WARP Connector or device agent can communicate with each other over the mesh network
<ul>
<li>Developers working from home can communicate with the production and staging servers in the cloud</li>
<li>The employee in the retail location, as well as the developer at home, can receive VOIP calls on their laptop</li>
</ul>
</li>
<li>A HPC Cluster in AWS represents a proprietary solution in which no third-party software agents can be installed; as a result, it uses an IPsec connection to Magic WAN</li>
<li>In the retail location, the Magic WAN Connector routes all traffic to Cloudflare via an IPsec tunnel
<ul>
<li>An employee&rsquo;s laptop running the device agent creates its own secure connection to Cloudflare that is routed over the IPsec tunnel</li>
</ul>
</li>
<li>The application owner of the reporting system maintains a connection to Cloudflare using <code>cloudflared</code> and doesn&rsquo;t require any networking help to expose their application to employees</li>
</ul>
<p><figure class="image-caption">
    <img alt="Connecting and routing traffic can be created using various methods such as Cloudflare Network Interconnect, IPSEC tunnels, WARP Connector and cloudflared." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-14.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<p><sub><em>Note: All of the endpoints connected via the WARP Connector or device agent are automatically assigned IP addresses from the 100.96.0.0/12 address range, while endpoints connected to Magic WAN retain their assigned RFC1918 private IP addresses. <code>cloudflared</code> can be deployed in any of the locations by an application owner to provide hostname-based connectivity to the application.</em></sub></p>
<p>Once the networks, applications, and user devices are connected to Cloudflare — regardless of the connection methods and devices used — all traffic can be inspected, authenticated, and filtered by the Cloudflare SASE services, then securely routed to their intended destinations. Additionally, consistent policies can be applied across all traffic, no matter how it arrives at Cloudflare.</p>
<h4 id="checkpoint-connecting-networks-to-cloudflare">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#checkpoint-connecting-networks-to-cloudflare">&#8203;​</a>
    </span>
    <span>Checkpoint: Connecting networks to Cloudflare</span>
  </h4><p>Now this is what a SASE architecture looks like where corporate network traffic from everywhere is forwarded to and processed by Cloudflare. In this architecture, it is possible to make a network connection from any remote location, office location or data center and connect to applications and services living in SaaS infrastructure, cloud-hosted infrastructure or an organization&rsquo;s own on-premise data centers.</p>
<p><figure class="image-caption">
    <img alt="Traffic from all networks, North and South, as well as East and West, is now flowing through and secured by Cloudflare." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-15.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<h3 id="forwarding-device-traffic">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#forwarding-device-traffic">&#8203;​</a>
    </span>
    <span>Forwarding device traffic</span>
  </h3><p>The previous sections explain using ZTNA to secure access to self-hosted applications and using an SWG to inspect and filter traffic destined for the Internet. When a user is working on a device in any of the company networks that is connected to Cloudflare&rsquo;s connectivity cloud, all that traffic is inspected and policies applied without disrupting the user&rsquo;s workflow. Yet, users are not always (or ever) in the office; they work from home, on the road, or from other public networks. How do you ensure they have reliable access to your internal applications? How do you ensure their Internet browsing is secure no matter their work location?</p>
<p>There are several approaches to ensure that traffic from a user device which isn&rsquo;t connected to an existing Cloudflare protected network, are also forwarding traffic through Cloudflare and be protected.</p>
<ul>
<li><a href=#connecting-with-a-device-agent class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Install an agent on the device</span></a></li>
<li><a href=#browser-proxy-configuration class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Modify browser proxy configuration</span></a></li>
<li><a href=#using-remote-browser-instances class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Direct the user to a remote browser instance</span></a></li>
<li><a href=#agentless-dns-filtering class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Modify DNS configuration</span></a></li>
</ul>
<h4 id="connecting-with-a-device-agent">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#connecting-with-a-device-agent">&#8203;​</a>
    </span>
    <span>Connecting with a device agent</span>
  </h4><p>The preferred method of ensuring device traffic is forwarded to Cloudflare is to install the device agent (also referred to as <a href=/cloudflare-one/connections/connect-devices/warp class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Cloudflare WARP</span></a>). The agent runs on Windows, macOS, Linux, iOS, and Android/ChromeOS, and creates a secure connection to Cloudflare where all non-local traffic is sent. Because of Cloudflare&rsquo;s use of Anycast networking, the device agent always connects to the nearest Cloudflare server to ensure the best performance for the user. The device agent also collects local machine and network information, which is sent in the request to enrich the policy in Cloudflare.</p>
<p>To allow for flexibility in how different devices and users connect, there are multiple <a href=/cloudflare-one/connections/connect-devices/warp/configure-warp/warp-modes/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">deployment modes</span></a>:</p>
<ul>
<li>A full L4 traffic proxy</li>
<li>L7 DNS proxy</li>
<li>L7 HTTP proxy</li>
<li>The ability to just collect device posture information</li>
</ul>
<p>For example, organizations might have an office that continues to use an existing <a href="https://www.cloudflare.com/learning/access-management/what-is-dns-filtering/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">DNS filtering</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> service, so they can configure the agent to just proxy network and HTTP traffic.</p>
<p>The agent can also be configured with flexible routing controls that allow for scenarios in which traffic destined for office printers is not sent to the Cloudflare network but, instead, routed to the local network. These <a href=/cloudflare-one/connections/connect-devices/warp/configure-warp/route-traffic/split-tunnels/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">split tunnel configurations</span></a> can be made specific to groups of users, types of device operating system, or networks and by default, traffic destined to all private <a href="https://datatracker.ietf.org/doc/html/rfc1918" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">IPv4 and IPv6 ranges</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> is sent to the device&rsquo;s default gateway. If the application the user is attempting to reach is not in public DNS, you can configure the hostname and domain to be resolved with <a href=/cloudflare-one/connections/connect-networks/private-net/cloudflared/private-dns/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">local DNS services</span></a>, so that the device agent does not attempt to resolve these using Cloudflare DNS.</p>
<p><figure class="image-caption">
    <img alt="Using the device agent allows Internet and company application bound traffic to be secured by Cloudflare&amp;rsquo;s SWG and ZTNA services." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-16.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<p>The agent is more than just a network proxy; it is able to examine the device&rsquo;s security posture, such as if the operating system is fully up-to-date or if the hard disk is encrypted. Cloudflare&rsquo;s integrations with <a href="https://www.cloudflare.com/partners/technology-partners/crowdstrike/endpoint-partners/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">CrowdStrike</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>, <a href="https://www.cloudflare.com/partners/technology-partners/sentinelone/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">SentinelOne</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>, and other third-party services also provide additional data about the security posture of the device. All of this information is associated with each request and, therefore, available for use in company policies — as explained in the &ldquo;Unified Management&rdquo; section.</p>
<p>The agent can be <a href=/cloudflare-one/connections/connect-devices/warp/deployment/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">deployed</span></a> to a device either manually or using existing endpoint management (UEM) technologies. Using the agent, users register and authenticate their device to Cloudflare with the integrated identity providers. Identity information — combined with information about the local device — is then used in your SWG and ZTNA policies (including inline CASB capabilities shared across these Cloudflare services).</p>
<h4 id="browser-proxy-configuration">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#browser-proxy-configuration">&#8203;​</a>
    </span>
    <span>Browser proxy configuration</span>
  </h4><p>When it is not possible to install software on the device, there are agentless approaches.</p>
<p>One option is to configure the browser to forward HTTP requests to Cloudflare by configuring proxy server details in the browser or OS. Although this can be done manually, it is more common for organizations to automate the configuration of browser proxy settings using Internet-hosted <a href=/cloudflare-one/connections/connect-devices/agentless/pac-files/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Proxy Auto-Configuration</span></a> (PAC) files. The browser identifies the PAC file location in several ways:</p>
<ul>
<li>MDM software configuring the setting in the browser</li>
<li>In Windows domains, Group Policy Objects (GPO) can configure the browser&rsquo;s PAC file</li>
<li>Browsers can use <a href="https://datatracker.ietf.org/doc/html/draft-ietf-wrec-wpad-01" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Web Proxy Auto-Discovery</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> (WPAD)</li>
</ul>
<p>From there, configure a proxy endpoint where the browser will send all HTTP requests to. If using this method, please note that:</p>
<ul>
<li>Filtering HTTPS traffic will also require <a href=/cloudflare-one/connections/connect-devices/warp/user-side-certificates/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">installing and trusting Cloudflare root certificates</span></a> on the devices.</li>
<li>A proxy endpoint will only proxy traffic sourced from a set of known IP addresses, such as the pool of public IP addresses used by a site&rsquo;s NAT gateway, that the administrator must specify.</li>
</ul>
<h4 id="using-remote-browser-instances">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#using-remote-browser-instances">&#8203;​</a>
    </span>
    <span>Using remote browser instances</span>
  </h4><p>Another option to ensure device traffic is sent to Cloudflare is to use <a href="https://www.cloudflare.com/learning/access-management/what-is-browser-isolation/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">remote browser isolation</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> (RBI). When a remote user attempts to visit a website, the corresponding requests and responses are handled by a headless remote browser running in the Cloudflare network that functions as a &ldquo;clone&rdquo; of the user device&rsquo;s local browser. This shields the user&rsquo;s device from potential harmful content and code execution that may be downloaded from the website it visits.</p>
<p>RBI renders the received content in an isolated and secure cloud environment. Instead of executing the web content locally, the user device receives commands for how to &ldquo;draw&rdquo; the final rendered web page over a highly optimized protocol supported by all HTML5-compliant browsers on all operating systems. Because the remote browser runs on Cloudflare&rsquo;s servers, SWG policies are automatically applied to all browser requests.</p>
<p>Ensuring access to sites is protected with RBI does not require any local software installation or reconfiguring the user&rsquo;s browser. Below are <a href=/cloudflare-one/policies/browser-isolation/setup/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">several ways</span></a> to accomplish this:</p>
<ul>
<li>Typically, a remote browser session is started as the result of an SWG policy — the user just requests websites without being notified that the content is loading in a remote browser.</li>
<li>Organizations can also provide users with a link that automatically ensures RBI always processes each request.</li>
<li>Organizations can also opt to use the ZTNA service to redirect all traffic from self-hosted applications via RBI instances.</li>
</ul>
<p>All requests via a remote browser pass through the Cloudflare SWG; therefore, policies can enforce certain website access limitations. For instance, browser isolation policies can be established to:</p>
<ul>
<li>Disable copy/paste between a remote web page and the user&rsquo;s local machine; this can prevent the employee from pasting proprietary code into third-party chatbots.</li>
<li>Disable printing of remote web content to prevent contractors from printing confidential information</li>
<li>Disable file uploads/downloads to ensure sensitive company data is not sent to — or downloaded from — certain websites.</li>
<li>Disable keyboard input (in combination with other policies) to limit data being exposed, such as someone typing in passwords to a phishing site.</li>
</ul>
<p>Isolating web applications and applying policies to risky websites helps organizations limit data loss from cyber threats or user error. And, like many Cloudflare One capabilities, RBI can be leveraged across other areas of the SASE architecture. Cloudflare&rsquo;s <a href="https://www.cloudflare.com/learning/email-security/what-is-email-security/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">email security</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> service, for example, can automatically rewrite and isolate suspicious links in emails. This &ldquo;email link isolation&rdquo; capability helps protect the user from potential malicious activity such as credential harvesting phishing.</p>
<h4 id="agentless-dns-filtering">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#agentless-dns-filtering">&#8203;​</a>
    </span>
    <span>Agentless DNS Filtering</span>
  </h4><p>Another option for securing traffic via the Cloudflare network is to configure the device to forward DNS traffic to Cloudflare to be inspected and filtered. First <a href=/cloudflare-one/policies/gateway/initial-setup/dns/#connect-dns-locations class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">DNS locations</span></a> are created which allow policies to be applied based on different network locations. They can be determined either by the source IP address for the request or you can use &ldquo;<a href="https://www.cloudflare.com/learning/dns/dns-over-tls/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">DNS over TLS</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>&rdquo; or &ldquo;<a href="https://www.cloudflare.com/learning/dns/dns-over-tls/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">DNS over HTTPS</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>&rdquo;.</p>
<p>When using source IP addresses, either the device will need to be told which DNS servers to use, or the local DNS server on the network the device is connected to needs to forward all DNS queries to Cloudflare. For DNS over TLS or HTTPS support, the devices need to be configured and support varies. Our recommendation is to use DNS over HTTPS which has wider operating system support.</p>
<p>All of the above methods result in only the DNS requests — not all traffic — being sent to Cloudflare. SWG DNS policies are then implemented at this level to manage access to corporate network resources.</p>
<h4 id="summary-of-swg-capabilities-for-each-traffic-forwarding-method">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#summary-of-swg-capabilities-for-each-traffic-forwarding-method">&#8203;​</a>
    </span>
    <span>Summary of SWG capabilities for each traffic forwarding method</span>
  </h4><p>The following table summarizes SWG capabilities for the various methods of forwarding traffic to Cloudflare (as of Oct 2023):</p>
<div class="DocsMarkdown--table-wrap"><div class="DocsMarkdown--table-wrap-inner">
    <table>
<thead>
<tr>
<th></th>
<th>IP tunnel or Interconnect (Magic WAN)</th>
<th>Device Agent (WARP)<sup>*1</sup></th>
<th>Remote Browser</th>
<th>Browser proxy</th>
<th>DNS proxy</th>
</tr>
</thead>
<tbody>
<tr>
<td>Types of traffic forwarded</td>
<td>TCP/UDP</td>
<td>TPC/UDP</td>
<td>HTTP</td>
<td>HTTP</td>
<td>DNS</td>
</tr>
<tr>
<td><strong>Policy types</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>DNS</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>HTTP/S<sup>*2</sup></td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td>Network (L3/L4 parameter)</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><strong>Data available in policies</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Identity information</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No<sup>*3</sup></td>
</tr>
<tr>
<td>Device posture</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td><strong>Capabilities</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Remote browser isolation</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td>Enforce egress IP</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>N/A</td>
</tr>
</tbody>
</table>

  </div>
</div>
<p>Notes:</p>
<ol>
<li>Running the device agent in DNS over HTTP mode provides user identity information, in addition to the same capabilities as connecting via DNS.</li>
<li>To filter HTTPS traffic, the Cloudflare <a href=/cloudflare-one/connections/connect-devices/warp/user-side-certificates/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">certificate</span></a> needs to be installed on each device. This can be automated when using the device agent.</li>
<li>If configuring DNS over HTTPS, it is possible to inject a <a href=/cloudflare-one/connections/connect-devices/agentless/dns/dns-over-https/#filter-doh-requests-by-user class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">service token</span></a> into the request, which associates the query with an authenticated user.</li>
</ol>
<h4 id="checkpoint-forwarding-device-traffic-to-cloudflare">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#checkpoint-forwarding-device-traffic-to-cloudflare">&#8203;​</a>
    </span>
    <span>Checkpoint: Forwarding device traffic to Cloudflare</span>
  </h4><p>By connecting entire networks or individual devices, organizations can now route user traffic to Cloudflare for secure access to privately-hosted applications and secure public Internet access.</p>
<p>Once traffic from all user devices is forwarded to the Cloudflare network, it is time for organizations to revisit their high-level SASE architecture:</p>
<p><figure class="image-caption">
    <img alt="With all devices and networks connected, any traffic destined for company applications and services all flows through Cloudflare, where policies are applied to determine access." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-17.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<h3 id="verifying-users-and-devices">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#verifying-users-and-devices">&#8203;​</a>
    </span>
    <span>Verifying users and devices</span>
  </h3><p>At this point in implementing SASE architecture, organizations have the ability to route and secure traffic beginning from the point a request is made from a browser on a user&rsquo;s device, all the way through Cloudflare&rsquo;s network to either a company-hosted private application/service or to the public Internet.</p>
<p>But, before organizations define policies to manage that access, they need to know who is making the request and determine the security posture of the device.</p>
<h4 id="integrating-identity-providers">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#integrating-identity-providers">&#8203;​</a>
    </span>
    <span>Integrating identity providers</span>
  </h4><p>The first step in any access decision is to determine who is making the request – i.e., to authenticate the user.</p>
<p>Cloudflare integrates with identity providers that manage secure access to resources for organizations&rsquo; employees, contractors, partners, and other users. This includes support for integrations with any <a href=/cloudflare-one/identity/idp-integration/generic-saml/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">SAML</span></a> - or OpenID Connect (<a href=/cloudflare-one/identity/idp-integration/generic-oidc/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">OIDC</span></a>) - compliant service; Cloudflare One also includes pre-built integrations with <a href=/cloudflare-one/identity/idp-integration/okta/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Okta</span></a>, <a href=/cloudflare-one/identity/idp-integration/azuread/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Microsoft Azure AD</span></a>, <a href=/cloudflare-one/identity/idp-integration/gsuite/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Google Workspace</span></a>, as well as consumer IdPs such as <a href=/cloudflare-one/identity/idp-integration/facebook-login/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Facebook</span></a>, <a href=/cloudflare-one/identity/idp-integration/github/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">GitHub</span></a> and <a href=/cloudflare-one/identity/idp-integration/linkedin/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">LinkedIn</span></a>.</p>
<p>Multiple IdPs can be integrated, allowing organizations to apply policies to a wide range of both internal and external users. When a user attempts to access a Cloudflare secured application or service, they are redirected to authenticate via one of the integrated IdPs. When using the device agent, users must also authenticate to one of their organization&rsquo;s configured IdPs.</p>
<p><figure class="image-caption">
    <img alt="Users are presented with a list of integrated identity providers before accessing protected applications." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-18.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<p>Once a user is authenticated, Cloudflare receives that user&rsquo;s information, such as username, group membership, authentication method (password, whether MFA was involved and what type), and other associated attributes (i.e., the user&rsquo;s  role, department, or office location). This information from the IdP is then made available to the policy engine.</p>
<p>In addition to user identities, most corporate directories also contain groups to which those identities are members. Cloudflare supports the importing of group information, which is then used as part of the policy. Group membership is a critical part of aggregating single identities so that policies can be less complex. It is far easier — for example — to set a policy allowing all employees in the sales department to access Salesforce, than to identify each user in the sales organization.</p>
<p>Cloudflare also supports authentication of devices that are not typically associated with a human user – such as an IoT device monitoring weather conditions at a factory. For those secure connections, organizations can generate <a href=/cloudflare-one/identity/service-tokens/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">service tokens</span></a> or create <a href="https://www.cloudflare.com/learning/access-management/what-is-mutual-tls/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Mutual TLS</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> (mTLS) certificates that can be deployed to such devices or machine applications.</p>
<h4 id="trusting-devices">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#trusting-devices">&#8203;​</a>
    </span>
    <span>Trusting devices</span>
  </h4><p>Not only does the user identity need to be verified, but the security posture of the user&rsquo;s device needs to be assessed. The device agent is able to provide a range of device information, which Cloudflare uses to build comprehensive security policies.</p>
<p>The following built-in posture checks are available:</p>
<ul>
<li><a href=/cloudflare-one/identity/devices/warp-client-checks/application-check/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Application check</span></a>: Checks that a specific application process is running</li>
<li><a href=/cloudflare-one/identity/devices/warp-client-checks/file-check/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">File check</span></a>: Checks for the presence of a file</li>
<li><a href=/cloudflare-one/identity/devices/warp-client-checks/firewall/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Firewall</span></a>: Checks if a firewall is running</li>
<li><a href=/cloudflare-one/identity/devices/warp-client-checks/disk-encryption/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Disk encryption</span></a>: Checks if/how many disks are encrypted</li>
<li><a href=/cloudflare-one/identity/devices/warp-client-checks/domain-joined/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Domain joined</span></a>: Checks if the device is joined to a Microsoft Active Directory domain</li>
<li><a href=/cloudflare-one/identity/devices/warp-client-checks/os-version/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">OS version</span></a>: Checks what version of the OS is running</li>
<li><a href=/cloudflare-one/identity/devices/warp-client-checks/device-uuid/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Unique Client ID</span></a>: When using an MDM too, organizations can assign a verifiable UUID to a mobile, desktop, or laptop device</li>
<li><a href=/cloudflare-one/identity/devices/warp-client-checks/corp-device/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Device serial number</span></a>: Checks to see if the device serial matches a list of company desktop/laptop computers</li>
</ul>
<p>Cloudflare One can also integrate with any deployed endpoint security solution, such as <a href=/cloudflare-one/identity/devices/service-providers/microsoft/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Microsoft Endpoint Manager</span></a>, <a href=/cloudflare-one/identity/devices/access-integrations/tanium/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Tanium</span></a>, <a href=/cloudflare-one/identity/devices/warp-client-checks/carbon-black/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Carbon Black</span></a>, <a href=/cloudflare-one/identity/devices/service-providers/crowdstrike/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">CrowdStrike</span></a>, <a href=/cloudflare-one/identity/devices/warp-client-checks/sentinel-one/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">SentinelOne</span></a>, and more. Any data from those products can be passed to Cloudflare for use in access decisions.</p>
<p>All of the above device information, combined with data on the user identity and also the network the device is on, is available in Cloudflare to be used as part of the company policy. For example, organizations could choose to only allow administrators to SSH into servers when all of the following conditions are met: their device is free from threats, running the latest operating system, and joined to the company domain.</p>
<p>Because this information is available for every network request, any time a device posture changes, its ability to connect to an organization&rsquo;s resources is immediately impacted.</p>
<h4 id="integrating-email-services">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#integrating-email-services">&#8203;​</a>
    </span>
    <span>Integrating email services</span>
  </h4><p>Email — the #1 communication tool for many organizations and the most common channel by which phishing attacks occur — is another important corporate resource that should be secured via a SASE architecture. Phishing is the root cause of upwards of 90% of breaches that lead to financial loss and brand damage.</p>
<p>Cloudflare&rsquo;s email security service scans for signs of malicious content or attachments before they can reach the inbox, and also proactively scans the Internet for attacker infrastructure and attack delivery mechanisms, looking for programmatically-created domains that are used to host content as part of a planned attack. Our service uses all this data to also protect against business and vendor email compromises (<a href="https://www.cloudflare.com/learning/email-security/business-email-compromise-bec/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">BEC</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> / <a href="https://www.cloudflare.com/learning/email-security/what-is-vendor-email-compromise/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">VEC</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>), which are notoriously hard to detect due to their lack of payloads and ability to look like legitimate email traffic.</p>
<p>Instead of deploying tunnels to manage and control traffic to email servers, Cloudflare provides two methods of email security <a href=/email-security/deployment/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">setup</span></a>:</p>
<ul>
<li><a href=/email-security/deployment/inline/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Inline</span></a>: Redirect all inbound email traffic through Cloudflare before they reach a user&rsquo;s inbox by modifying MX records</li>
<li><a href=/email-security/deployment/api/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">API</span></a>: Integrate Cloudflare directly with an email provider such as Microsoft 365 or Gmail</li>
</ul>
<p>Modifying MX records (inline deployment) forces all inbound email traffic through our cloud email security service where it is scanned, and — if found to be malicious — blocked from reaching a user&rsquo;s inbox. Because the service works at the MX record level, it is possible to use the email security service with any <a href="https://www.cloudflare.com/learning/email-security/what-is-smtp/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">SMTP-compliant</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> email service.</p>
<p><figure class="image-caption">
    <img alt="Protecting email with Cloudflare using MX records ensures all emails are scanned and categorized." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-19.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<p>Organizations can also opt to integrate email security directly with their email service via APIs. Note that this approach has two drawbacks: there are fewer integrations Cloudflare supports and there is always a small delay between the email being delivered to the service and Cloudflare detecting it via the API.</p>
<p><figure class="image-caption">
    <img alt="Protecting email with Cloudflare using APIs avoids the need to change DNS policy, but introduces delays into email detection and limits the types of email services that can be protected." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-20.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<h4 id="checkpoint-a-complete-sase-architecture-with-cloudflare">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#checkpoint-a-complete-sase-architecture-with-cloudflare">&#8203;​</a>
    </span>
    <span>Checkpoint: A complete SASE architecture with Cloudflare</span>
  </h4><p>The steps above provide a complete view of evolving to SASE architecture using Cloudflare One. As the diagram below shows, secure access to all private applications, services, and networks — as well as ensuring the security of users&rsquo; general Internet access — is now applied to all users in the organization, internal or external.</p>
<p><figure class="image-caption">
    <img alt="A fully deployed SASE solution with Cloudflare protects every aspect of your business. Ensuring all access to applications is secured and all threats from the Internet mitigated." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-21.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<p>For ease of use, the entire Cloudflare One platform can be configured via <a href="/api/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">API</span><span class="DocsMarkdown--link-api-icon" aria-hidden="true">
  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="23px" height="12px" viewBox="0 0 23 12" version="1.1">
    <title>API link label</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Group">
            <rect id="Rectangle" fill="#e06d10" x="0" y="0" width="23" height="12" rx="2"/>
            <path d="M8.12890625,10 L9.58984375,10 L6.83984375,2.24951172 L5.27685547,2.24951172 L2.52685547,10 L3.95556641,10 L4.61621094,7.99658203 L7.46826172,7.99658203 L8.12890625,10 Z M6.0234375,3.61914062 L6.06103516,3.61914062 L7.140625,6.92773438 L4.93847656,6.92773438 L6.0234375,3.61914062 Z M10.9169922,2.24951172 L10.9169922,10 L12.3027344,10 L12.3027344,7.43798828 L13.8710938,7.43798828 C15.4394531,7.43798828 16.5405273,6.390625 16.5405273,4.84375 C16.5405273,3.296875 15.4716797,2.24951172 13.9301758,2.24951172 L10.9169922,2.24951172 Z M12.3027344,3.3828125 L13.5649414,3.3828125 C14.5585938,3.3828125 15.1333008,3.91455078 15.1333008,4.84375 C15.1333008,5.78369141 14.5532227,6.32080078 13.5595703,6.32080078 L12.3027344,6.32080078 L12.3027344,3.3828125 Z M19.4360352,10 L18.050293,10 L18.050293,2.24951172 L19.4360352,2.24951172 L19.4360352,10 Z" id="API" fill="#FFFFFF" fill-rule="nonzero"/>
        </g>
    </g>
</svg>
  <span is-visually-hidden>Open API docs link</span>
</span></a>; and with Cloudflare&rsquo;s <a href="https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Terraform provider</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>, organizations can manage the Cloudflare global network using the same tools they use to automate the rest of their infrastructure. This allows IT teams to fully manage their Cloudflare One infrastructure, including all the policies detailed in the next section, using code. There are also (as of Oct 2023) more than 500 <a href="https://github.com/cloudflare" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">GitHub</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> repositories, many of which allow IT teams to use and build tools to manage their Cloudflare deployment.</p>
<h2 id="unified-management">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#unified-management">&#8203;​</a>
    </span>
    <span>Unified management</span>
  </h2><p>Now that all users, devices, applications, networks, and other components are seamlessly integrated within a SASE architecture, Cloudflare One provides a centralized platform for comprehensive management. Because of the visibility Cloudflare has across the entire IT infrastructure, Cloudflare can aggregate signals from various sources, including devices, users, and networks. These signals can inform the creation of policies that govern access to organization resources.</p>
<p>Before we go into the details of how policies can be written to manage access to applications, services, and networks connected to Cloudflare, it&rsquo;s worth taking a look at the two main enforcement points in Cloudflare&rsquo;s SASE platform that control access: SWG and the ZTNA services. These services are configured through a single administrative dashboard, simplifying policy management across the entire SASE deployment.</p>
<p>The following diagram illustrates the flow of a request through these services, including the application of  policies and the source of  data for these policies. In the diagram below, the user request can either enter through the SWG or ZTNA depending on the type of service requested. It&rsquo;s also possible to combine both services, such as implementing a SWG HTTP policy that uses DLP service to inspect traffic related to a privately hosted application behind a ZTNA Cloudflare Tunnel. This configuration enables organizations to block downloads of sensitive data from internal applications that organizations have authorized for external access.</p>
<p><figure class="image-caption">
    <img alt="User requests to the Internet or self hosted applications go through our SWG and/or ZTNA service. Administrators have a single dashboard to manage policies across both." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-23.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<p>In the following sections, we introduce examples of how different policies can be configured to satisfy specific use cases. While these examples are not exhaustive, the goal is to demonstrate common ways Cloudflare One can be configured to address the challenges organizations encounter in its transition to a SASE architecture.</p>
<p>Connecting an IdP to Cloudflare provides the ability to make access decisions based on factors such as group membership, authentication method, or specific user attributes. Cloudflare&rsquo;s device agent also supplies additional signals for policy considerations, such as assessing the operating system or verifying the device&rsquo;s serial number against company-managed devices. However, there are features that allow users to incorporate additional data into deployment for building powerful policies.</p>
<h3 id="lists">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#lists">&#8203;​</a>
    </span>
    <span>Lists</span>
  </h3><p>Cloudflare&rsquo;s vast intelligent network continually monitors billions of web assets and <a href=/cloudflare-one/policies/gateway/domain-categories/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">categorizes them</span></a> based on our threat intelligence and general knowledge of Internet content. You can use our free <a href="https://radar.cloudflare.com/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Cloudflare Radar</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> service to examine what categories might be applied to any specific domain. Policies can then include these categories to block known and potential security risks on the public Internet, as well as specific categories of content.</p>
<p>Additionally, Cloudflare&rsquo;s SWG offers the flexibility to create and maintain customized <a href=/cloudflare-one/policies/gateway/lists/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">lists of data</span></a>. These lists can be uploaded via CSV files, manually maintained, or integrated with other processes and applications using the Cloudflare API. A list can contain the following data:</p>
<ul>
<li>URLs</li>
<li>Hostnames</li>
<li>Serial numbers (macOS, Windows, Linux)</li>
<li>Emails</li>
<li>IP addresses</li>
<li>Device IDs (iOS, Android)</li>
</ul>
<p>For example, organizations can maintain a list of IP addresses of all remote office locations, of short term contractors&rsquo; email addresses, or trusted company domains. These lists can be used in a policy to allow contractors access to a specific application if their traffic is coming from a known office IP address.</p>
<h3 id="dlp-profiles-and-datasets">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#dlp-profiles-and-datasets">&#8203;​</a>
    </span>
    <span>DLP profiles and datasets</span>
  </h3><p>Cloudflare looks at various aspects of a request, including the source IP, the requested domain, and the identity of the authenticated user initiating the request. Cloudflare also offers a DLP service which has the ability to detect and block requests based on the presence of sensitive content. The service has built in DLP profiles for common data types such as financial information, personally identifiable information (PII), and API keys.</p>
<p>There is even a profile for source code, so users can detect and block the transfer of C++ or Python files. Organizations can create customized DLP profiles and use regular expressions to define the patterns of data they are looking for. For data that is hard to define a pattern for, datasets can be used which match exact data values. These datasets allow for the bulk upload of any data to be matched, such as lists of customer account IDs or sensitive project names. These profiles and data sets can be incorporated into policies to prevent users from downloading large files containing confidential customer data.</p>
<p>To reduce the risk of false positives, internal users have the option to establish a match count on the profile. This means that a specific number of matches within the data are required before profile triggers. This approach prevents scenarios where a random string resembling PII or a credit card number would trigger the profile unnecessarily. By implementing a match count, the policy demands that multiple data elements align with the profile, significantly increasing its accuracy.</p>
<p>Organizations can further increase the accuracy of the DLP profile by enabling context analysis. This feature requires certain proximity keywords to exist within approximately 1000 characters of a match. For example, the string &ldquo;123-45-6789&rdquo; will only count as a detection if it is in proximity to keywords such as &ldquo;ssn&rdquo;. This contextual requirement bolsters the accuracy of the detection process.</p>
<p>The DLP service seamlessly integrates with both Cloudflare&rsquo;s SWG and API-driven CASB services. In the case of the API CASB, DLP profiles are selected for scanning each integration with each SaaS application. This customization allows tailored detection criteria based on the type of data you wish to secure within each application.</p>
<p>For the SWG service, DLP profiles can be included into any policy to detect the existence of sensitive data in any request passing through the gateway. The most common action associated with this detection is to block the request, providing a robust layer of security.</p>
<h3 id="access-groups">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#access-groups">&#8203;​</a>
    </span>
    <span>Access Groups</span>
  </h3><p>Access Groups are a powerful tool in the ZTNA service for aggregating users or devices into a unified entity that can be referenced within a policy. Within Cloudflare, multiple pieces of information can be combined into a single Access Group, efficiently reusing data across multiple policies while maintaining it in one centralized location.</p>
<p>Consider an Access Group designed to manage access to critical server infrastructure. The same Access Group can be used in a device agent policy that prevents administrators from disabling their connection to Cloudflare. This approach streamlines policy management and ensures consistency across various policy implementations.</p>
<p>Below is a diagram featuring an Access Group named &ldquo;Secure Administrators,&rdquo; which uses a range of attributes to define the characteristics of secure administrators. The diagram shows the addition of two other Access Groups within &ldquo;Secure Administrators&rdquo;. The groups include devices running on either the latest Windows or macOS, along with the requirement that the device must have either File Vault or Bitlocker enabled.</p>
<p><figure class="image-caption">
    <img alt="An example of using Access Groups can be for grouping up many device, network or user attributes into a single policy that can be reused across applications." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-24.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<p>Consistent with Cloudflare&rsquo;s overarching flexibility, Access Groups can be created, updated, and applied to policies through Cloudflare API or using Terraform. This allows a seamless integration with existing IT systems and processes, ensuring a cohesive approach to access management.</p>
<p>Now that we have a solid understanding of all the components available, let&rsquo;s zoom in and take a look at some common use cases and how they are configured. Keep in mind that Cloudflare&rsquo;s policy engines are incredibly powerful and flexible, so these examples are just a glimpse into the capabilities of Cloudflare&rsquo;s SASE platform.</p>
<h3 id="example-use-cases">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#example-use-cases">&#8203;​</a>
    </span>
    <span>Example use cases</span>
  </h3><h4 id="secure-access-to-self-hosted-apps-and-services">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#secure-access-to-self-hosted-apps-and-services">&#8203;​</a>
    </span>
    <span>Secure access to self hosted apps and services</span>
  </h4><p>One common driver for moving to a SASE architecture is replacing existing VPN connectivity with a more flexible and secure solution. Cloudflare One SASE architecture enables high performance and secure access to self hosted applications from anywhere in the world. However, the next step entails defining the policies that control access to resources.</p>
<p>In this example, consider two services: a database administration application (<a href="https://www.pgadmin.org/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">pgadmin</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> for example) and an SSH daemon running on the database server. The diagram below illustrates the flow of traffic and highlights the ZTNA service. It&rsquo;s important to note that all other services still retain the ability to inspect the request. For instance, the contractor using their personal cell phone in Germany should only have access to the db admin tool, while the employee on a managed device can access both the db admin tool and SSH into the database server.</p>
<p><figure class="image-caption">
    <img alt="An employee working on a managed device at home can access both the db admin tool as well as the SSH service. However a contractor in Germany only has access to the db admin tool." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-25.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<p>The policies that enable access rely on two Access Groups.</p>
<ul>
<li>Contractors
<ul>
<li>Users who authenticate through Okta and are part of the Okta group labeled &ldquo;Contractors&rdquo;</li>
<li>Authentication requires the use of a hardware token</li>
</ul>
</li>
<li>Database and IT administrators
<ul>
<li>Users who authenticate through Okta and are in the Okta groups &ldquo;IT administrators&rdquo; or &ldquo;Database administrators&rdquo;</li>
<li>Authentication requires the use of a hardware token</li>
<li>Users should be on a device with a serial number in the &ldquo;Managed Devices&rdquo; list</li>
</ul>
</li>
</ul>
<p>Both of these groups are then used in two different access policies.</p>
<ul>
<li>Database administration tool access
<ul>
<li>Database and IT admins are allowed access</li>
<li>Members of the &ldquo;Contractor&rdquo; access group are allowed access, but each authenticated session requires the user to complete a justification request</li>
<li>The admin tool is rendered in an isolated browser on Cloudflare&rsquo;s Edge network and file downloads are disabled</li>
</ul>
</li>
<li>Database server SSH access
<ul>
<li>&ldquo;Database and IT administrators&rdquo; group is allowed access</li>
<li>Their device must pass a Crowdstrike risk score of at least 80</li>
<li>Access must come from a device that is running our device agent and is connected to Cloudflare</li>
</ul>
</li>
</ul>
<p>These policies show that contractors are only allowed access to the database administration tool and do not have SSH access to the server. IT and database administrators can access the SSH service only when their devices are securely connected to Cloudflare via the device agent. Every element of the access groups and policies is evaluated for every login, so an IT administrator using a compromised laptop or a contractor unable to authenticate with a hardware token will be denied access.</p>
<p>Both user groups will connect to Cloudflare through the closest and fastest access point of Cloudflare&rsquo;s globally distributed network, resulting in a high quality experience for all users no matter where they are.</p>
<h4 id="threat-defense-for-distributed-offices-and-remote-workers">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#threat-defense-for-distributed-offices-and-remote-workers">&#8203;​</a>
    </span>
    <span>Threat defense for distributed offices and remote workers</span>
  </h4><p>Another reason for using a SASE solution is to apply company security policies consistently across all users (whether they are employees or contractors) in the organization, regardless of where they work. The Cloudflare One SASE architecture shows that all user traffic, whether routed directly on the device or through the connected network, will go through Cloudflare. Cloudflare&rsquo;s SWG then handles inspection of this traffic. Depending on the connection method, policies can be applied either to the HTTP or DNS request. For example:</p>
<p><figure class="image-caption">
    <img alt="Blocking high risk websites can be done by selecting a few options in the SWG policy" src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-26.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<p>This can then be applied to secure and protect all users in one policy. Cloudflare can write another policy allowing access to social media websites while isolating all sessions in a remote browser hosted on Cloudflare&rsquo;s network.</p>
<p><figure class="image-caption">
    <img alt="Isolating all social media websites can be done by identifying the application or website name and selecting what actions the user can take, such as stopping them from copy and pasting or printing." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-27.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<p>With this setup, every request to a social media website ensures the following security measures:</p>
<ul>
<li>Any content on the social media website that contains harmful code is prevented from executing on the local device</li>
<li>External users are restricted from downloading content from the site that could potentially be infected with malware or spyware</li>
</ul>
<h4 id="data-protection-for-regulatory-compliance">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#data-protection-for-regulatory-compliance">&#8203;​</a>
    </span>
    <span>Data protection for regulatory compliance</span>
  </h4><p>Because Cloudflare One has visibility over every network request, Cloudflare can create policies that apply to the data in the request. This means that the DLP services can be used to detect the download of content from an application and block it for specific user demographics. Let&rsquo;s look at the following policy.</p>
<p><figure class="image-caption">
    <img alt="Our DLP policies allow for the inspection of content in a request and blocking it." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-28.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<p>This policy would prevent contractors from downloading a file containing customer accounts information. Furthermore, Cloudflare can configure an additional policy to block the same download if the user&rsquo;s device does not meet specific security posture requirements. This ensures the consistent enforcement of a common rule: no sensitive customer data can be downloaded onto a device that does not meet the required security standards.</p>
<p>DLP policies can also be applied in the other direction, ensuring that company sensitive documents are not uploaded to non approved cloud storage or social media.</p>
<p><figure class="image-caption">
    <img alt="A DLP policy can also examine if a HTTP PUT, i.e. a file upload, is taking place to a non approved application where the request contains sensitive data." src="/images/reference-architecture/cloudflare-one-reference-architecture-images/cf1-ref-arch-29.svg" loading="lazy" class="image-figure lightbox"/>
    <figcaption></figcaption>
</figure></p>
<h3 id="visibility-across-the-deployment">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#visibility-across-the-deployment">&#8203;​</a>
    </span>
    <span>Visibility across the deployment</span>
  </h3><p>At this point in the SASE journey, users have re-architectured the IT network and security infrastructure to fully leverage all the capabilities of the Cloudflare One SASE platform. A critical element in long term deployment involves establishing complete visibility into the organization and the ability to diagnose and quickly resolve issues.</p>
<p>For quick analysis, Cloudflare provides built-in dashboards and analytics that offers a daily overview of the deployment&rsquo;s operational status. As traffic flows through Cloudflare, the dashboard will alert internal users to the most frequently used SaaS applications, enabling quick actions if any unauthorized applications are accessed by external users. Moreover, all logging information from all Cloudflare One services is accessible and searchable from the administrator&rsquo;s dashboard. This makes it efficient to filter for specific blocked requests, with each log containing useful information such as the user&rsquo;s identity, device information, and the specific rule that triggered the block. This can be very handy in the early stages of deployment where rules can often need tweaking.</p>
<p>However, many organizations rely on existing dedicated tools to manage long term visibility over the performance of their infrastructure. To support this, Cloudflare allows the export of all logging information into such tools. Every aspect of Cloudflare One is logged and can be exported. Cloudflare offers built in integrations for continuous transmission of small data batches to a variety of platforms, including AWS, Google Cloud Storage, SumoLogic, Azure, Splunk, Datadog, and any S3 compatible service. This flexibility allows organizations to selectively choose which fields to control the type and volume of data to incorporate into existing tools.</p>
<p>On top of logs which are related to traffic and policies, Cloudflare also audits management activity. All administrative actions and changes to Cloudflare Tunnels are logged. This allows for change management auditing and, like all other logs, can be exported into other tools as part of a wider change management monitoring solution.</p>
<h4 id="digital-experience-monitoring">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#digital-experience-monitoring">&#8203;​</a>
    </span>
    <span>Digital Experience Monitoring</span>
  </h4><p>Cloudflare has <a href="https://radar.cloudflare.com/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">deep insight</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> into the performance of the Internet and connected networks and devices. This knowledge empowers IT administrators with visibility into minute-by-minute experiences of their end-users, enabling swift resolution of issues that impact productivity.</p>
<p>The Digital Experience Monitoring (DEM) service enables IT to run constant tests against user devices to determine the quality of the connection to company resources. The results of these tests are available on the Cloudflare One dashboard, enabling IT administrators to review and identify root causes when a specific user encounters difficulties accessing an application. These issues could stem from the user&rsquo;s local ISP or a specific underperforming SaaS service provider. This data is invaluable in helping administrators in diagnosing and addressing poor user experiences, leading to faster issue resolution.</p>
<p>The dashboard shows a comprehensive summary of the entire device fleet, displaying real-time and historical connectivity metrics for all organization devices. IT admins can then drill down into specific devices for further analysis.</p>
<h2 id="summary">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#summary">&#8203;​</a>
    </span>
    <span>Summary</span>
  </h2><p>Having acquired a comprehensive understanding of Cloudflare&rsquo;s SASE platform, you are now well-equipped to integrate it with existing infrastructure. This system efficiently secures access to applications for both employees and external users, starting from the initial request on the device and extending across every network to the application, regardless of its location. This powerful new model for securing networks, applications, devices, and users is built on the massive Cloudflare network and managed through an intuitive management interface.</p>
<p>It&rsquo;s worth noting that many of the capabilities described in this document can be used for free, without any time constraints, for up to 50 users. <a href="https://dash.cloudflare.com/sign-up" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Sign up</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> for an account and head to the <a href="https://one.dash.cloudflare.com/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Zero Trust</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> section. While this document has provided an overview of the platform as a whole, for those interested in delving deeper into specific areas, we recommend exploring the following resources.</p>
<table>
<thead>
<tr>
<th>Topic</th>
<th>Content</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cloudflare Tunnels</td>
<td><a href=/cloudflare-one/connections/connect-networks/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Understanding Cloudflare Tunnel</span></a> - <a href="https://github.com/cloudflare/cloudflared" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Open source repository for <code>cloudflared</code></span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a></td>
</tr>
<tr>
<td>WAN as a Service</td>
<td><a href=/magic-wan/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Cloudflare Magic WAN documentation</span></a></td>
</tr>
<tr>
<td>Secure Web Gateway</td>
<td><a href=/cloudflare-one/policies/gateway/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">How to build Gateway policies</span></a></td>
</tr>
<tr>
<td>Zero Trust Network Access</td>
<td><a href=/cloudflare-one/policies/access/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">How to build Access policies</span></a></td>
</tr>
<tr>
<td>Remote Browser Isolation</td>
<td><a href=/cloudflare-one/policies/browser-isolation/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Understanding browser isolation</span></a></td>
</tr>
<tr>
<td>API-Driven CASB</td>
<td><a href=/cloudflare-one/applications/scan-apps/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Scanning SaaS applications</span></a></td>
</tr>
<tr>
<td>Cloud Email Security</td>
<td><a href=/email-security/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Understanding Cloudflare Email Security</span></a></td>
</tr>
<tr>
<td>Replacing your VPN</td>
<td><a href=/learning-paths/replace-vpn/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Using Cloudflare to replace your VPN</span></a></td>
</tr>
</tbody>
</table>
<p>If you would like to discuss your SASE requirements in greater detail and connect with one of our architects, please visit <a href="https://www.cloudflare.com/cloudflare-one/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">https://www.cloudflare.com/cloudflare-one/</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> and request a consultation.</p>
</article>
      </div>
    </main>

    <footer class="DocsFooter">
  <div class="DocsFooter--content">
    <div class="DocsFooterResources">      
      <span class="DocsFooter--content-additional-wrapper"><a href="https://dash.cloudflare.com" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Cloudflare Dashboard</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>
      </span>
      
      <span class="DocsFooter--content-dot-spacer"> &nbsp; · &nbsp; </span>

      
      <span class="DocsFooter--content-additional-wrapper"><a href="https://community.cloudflare.com" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Community</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>
      </span> 
      
      <span class="DocsFooter--content-dot-spacer"> &nbsp; · &nbsp; </span>

      <span class="DocsFooter--content-additional-wrapper"><a href="https://www.cloudflare.com/learning/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Learning Center</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a></span>

      <span class="DocsFooter--content-dot-spacer"> &nbsp; · &nbsp; </span>

      <span class="DocsFooter--content-additional-wrapper"><a href="/support/contacting-cloudflare-support/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Support Portal</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>
      </span>

      <span class="DocsFooter--content-dot-spacer"> &nbsp; · &nbsp; </span>

      <span class="DocsFooter--content-additional-wrapper">
        
          <a role="button" id="ot-sdk-btn" class="ot-sdk-show-settings">Cookie Settings</a>
        
      </span>
    </div>
    <div>
      <span class="DocsFooter--edit-on-gh-link-wrapper"><a href="https://github.com/cloudflare/cloudflare-docs/blob/production/content/reference-architecture/architectures/sase.md" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Edit on GitHub</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a></span><span class="DocsFooter--content-dot-spacer"> &nbsp; · &nbsp; </span>

      <span class="DocsFooter--content-time">
        Updated <time
  class="relative"
  datetime=2024-04-22T16:16:50&#43;01:00
  title=2024-04-22
>April 22, 2024</time>
      </span></div>
  </div><script type="module" src="/lightbox.js" defer></script><link rel="stylesheet" href="/lightbox.css">
</footer>

  </div>
<script defer src="https://unpkg.com/littlefoot@4.0.0-11/dist/littlefoot.js" type="application/javascript" ></script>
    <script type="application/javascript"> document.addEventListener('DOMContentLoaded', () => littlefoot.default()) </script>
  </body>
</html>
