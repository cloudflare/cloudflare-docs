<!doctype html>
<html lang="en" theme="light" is-docs-page js-focus-visible-polyfill-available >
  <head>

  <meta charset="utf-8">
  <title>Use Workers KV directly from Rust · Cloudflare Workers KV</title>
  <meta name="title" content="Use Workers KV directly from Rust · Cloudflare Workers KV" />
  <meta name="image" content="https://developers.cloudflare.com/dev-products-preview.png" />

  <meta http-equiv="cleartype" content="on" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="application-name" content="Use Workers KV directly from Rust · Cloudflare Workers KV" />
  <meta name="msapplication-tap-highlight" content="no" />
  <meta name="apple-mobile-web-app-title" content="Use Workers KV directly from Rust · Cloudflare Workers KV" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="theme-color" content="#f38020" />

  <meta name="description" content="This tutorial will teach you how to read and write to KV directly from Rust using workers-rs ." />

  <meta property="og:site_name" content="Cloudflare Docs" />
  <meta property="og:image" content="https://developers.cloudflare.com/dev-products-preview.png" />
  <meta property="og:title" content="Use Workers KV directly from Rust · Cloudflare Workers KV" />
  <meta property="og:description" content="This tutorial will teach you how to read and write to KV directly from Rust using workers-rs ." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://developers.cloudflare.com/kv/tutorials/workers-kv-from-rust/" />

  <meta name="twitter:title" content="Use Workers KV directly from Rust · Cloudflare Workers KV" />
  <meta name="twitter:image" content="https://developers.cloudflare.com/dev-products-preview.png" />
  <meta name="twitter:description" content="This tutorial will teach you how to read and write to KV directly from Rust using workers-rs ." />
  <meta name="twitter:card" content="summary_large_image" />

  <meta name="pcx_product" content="kv"><meta name="algolia_product_filter" content="KV"><meta name="algolia_page_title" content="Use Workers KV directly from Rust">
  <meta name="pcx_word_count" content="500"><meta name="pcx_last_modified" content="9"><meta name="pcx_last_reviewed" content="10" /><meta name="pcx_content_type" content="tutorial" />
  <meta name="algolia_content_type" content="Tutorial"><meta name="pcx_content_group" content="Developer platform" />
  
  
  <link rel="icon" href="/favicon-32x32.png" />
  <link rel="canonical" href="https://developers.cloudflare.com/kv/tutorials/workers-kv-from-rust/" />
  <link rel="sitemap" href="/sitemap.xml" type="application/xml" />
  <link rel="manifest" href="/manifest.webmanifest" />

  <link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png" />
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png" />
  <link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png" />
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png" />
  <link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png" />
  <link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png" />
  <link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png" />
  <link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png" /><script type="module" src="/search.js" defer></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3.5.1" />
  <script defer async src="https://cdn.jsdelivr.net/npm/@docsearch/js@3.5.1"></script>
  <script>window.algoliaConfig = {"apikey":"4edb0a6cef3338ff4bcfbc6b3d2db56b","index":"developers-cloudflare2","product":"kv"}</script>
  <meta name="docsearch:product" content="kv" /><link rel="stylesheet preconnect" href="/style.css" />
      <link rel="stylesheet preconnect" href="/codeBlock.css" /><link rel="preload" href="https://unpkg.com/littlefoot@4.0.0-11/dist/littlefoot.css" as="style">
    <link rel="preload" href="https://unpkg.com/littlefoot@4.0.0-11/dist/littlefoot.js" as="script" />
    <link rel="stylesheet" href="https://unpkg.com/littlefoot@4.0.0-11/dist/littlefoot.css" /><script>// <stdin>
(function() {
  let tooEarly = false;
  let btn;
  let media;
  if (document.readyState !== "loading")
    init();
  else
    addEventListener("DOMContentLoaded", init);
  btn = document.querySelector("#ThemeToggle");
  tooEarly = !btn;
  function setter(isDark) {
    try {
      let theme = isDark ? "dark" : "light";
      document.documentElement.setAttribute("theme", theme);
      document.documentElement.setAttribute("data-theme", theme);
      localStorage.theme = JSON.stringify({ theme });
      if (btn) {
        btn.checked = isDark;
        tooEarly = false;
      } else if (tooEarly) {
        setTimeout(setter, 1, isDark);
      }
    } catch (err) {
    }
    if (isDark) {
      document.getElementById("ThemeToggle--tooltip").textContent = "Set theme to light (\u21E7+D)";
    } else {
      document.getElementById("ThemeToggle--tooltip").textContent = "Set theme to dark (\u21E7+D)";
    }
  }
  function init() {
    btn = btn || document.querySelector("#ThemeToggle");
    btn.addEventListener("change", () => setter(!!btn.checked));
    addEventListener("keydown", (ev) => {
      if (ev.target !== document.body || ev.repeat)
        return;
      if (ev.which === 68 && ev.shiftKey) {
        ev.preventDefault();
        setter(!btn.checked);
      }
    });
  }
  try {
    media = window.matchMedia("(prefers-color-scheme:dark)");
    media.onchange = (ev) => setter(ev.matches);
  } catch (err) {
  }
  try {
    let value = localStorage.theme;
    let row = value && JSON.parse(value);
    setter(row ? /dark/.test(row.theme) : !!(media && media.matches));
  } catch (err) {
  }
})();
</script><script type="module" src="/main.js" defer></script></head>
  <body><div class="DocsPage"><div>
    <a class="skip-link" href='#main'>Skip to content</a>
</div><div class="DocsMobileHeader">
  <a class="DocsMobileHeader--cloudflare-logo-link Link Link-without-underline" href="/">
    <div class="DocsNavLogoLockup DocsNavLogoLockup-with-small-gap">
      
<div class="DocsNavLogoLockup--logo">
  <svg viewBox="0 0 48 48" fill="currentColor" role="img" aria-labelledby="title - da4d1e25c64cbc8cfdba8ccf4c45edf8" xmlns="http://www.w3.org/2000/svg">
    <title id="title - da4d1e25c64cbc8cfdba8ccf4c45edf8">Cloudflare Docs logomark</title>
    <path d="M31.236 28.717c-.373-.548-1.003-.864-1.76-.9l-14.353-.195a.262.262 0 01-.221-.122.348.348 0 01-.035-.267.396.396 0 01.338-.268l14.48-.195c1.714-.085 3.58-1.533 4.232-3.309l.828-2.25a.503.503 0 00.023-.292c-.932-4.404-4.698-7.689-9.198-7.689-4.15 0-7.672 2.798-8.931 6.679a4.156 4.156 0 00-2.973-.864c-1.994.207-3.59 1.874-3.789 3.954a4.84 4.84 0 00.105 1.545c-3.253.097-5.853 2.871-5.853 6.29 0 .304.024.608.059.912.023.146.14.256.28.256h26.488c.151 0 .291-.11.338-.268l.198-.742c.245-.876.152-1.68-.256-2.275zM36.062 21.39c-.128 0-.268 0-.396.012-.093 0-.175.073-.21.17l-.56 2.032c-.244.876-.151 1.679.257 2.275.373.548 1.003.864 1.76.9l3.055.195c.093 0 .175.049.222.122a.356.356 0 01.035.267.396.396 0 01-.339.268l-3.182.195c-1.726.085-3.58 1.532-4.232 3.309l-.234.62c-.046.122.035.243.164.243h10.935a.289.289 0 00.28-.219 8.654 8.654 0 00.292-2.214c0-4.501-3.521-8.175-7.847-8.175"></path>
  </svg>
</div>
<span class="DocsNavLogoLockup--text">
  <span data-text="Cloudflare">Cloudflare </span>
  <span data-text="Docs">Docs</span>
</span>
    </div>
  </a>
</div>

<div class="DocsMobileTitleHeader">
  <a aria-current="page" class="DocsMobileTitleHeader--logo-link Link Link-without-underline" href="/kv/">
    <div class="DocsNavLogoLockup DocsNavLogoLockup-with-small-gap">
      <div class="DocsNavLogoLockup--logo">
        <span title="Cloudflare KV logo"><svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 44.95H15V40.95H22V44.95Z" fill="#F6821F"/><path d="M15 36.95H22V32.95H15V36.95Z" fill="#F6821F"/><path d="M22 28.95H15V24.95H22V28.95Z" fill="#F6821F"/><path d="M26 44.95L49 44.95V40.95L26 40.95V44.95Z" fill="#F6821F"/><path d="M49 36.95L26 36.95V32.95L49 32.95V36.95Z" fill="#F6821F"/><path d="M26 28.95L49 28.95V24.95L26 24.95V28.95Z" fill="#F6821F"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12L8 10H27L28.6751 10.9072L32.0832 16.1316H56L58 18.1316V52L56 54H8L6 52V12ZM10 14V50H54V20.1316H31L29.3249 19.2243L25.9168 14H10Z" fill="#F6821F"/></svg></span>
      </div>

      <span class="DocsNavLogoLockup--text">
        <span class="DocsSidebar--docs-title-text-scaler" style="--length:2">KV</span>
      </span>
    </div>
  </a>

  <button class="Button DocsMobileTitleHeader--sidebar-toggle-button">
    <span class="DocsMobileTitleHeader--sidebar-toggle-button-icon" aria-hidden="true">
      <svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" role="img" aria-labelledby="title-1332672649688018"
        xmlns="http://www.w3.org/2000/svg">
        <title id="title-1332672649688018">Navigation menu icon</title>
        <path data-index="1" d="M5, 7h10" transform-origin="10  7"></path>
        <path data-index="2" d="M5,10h10" transform-origin="10 10"></path>
        <path data-index="3" d="M5,13h10" transform-origin="10 13"></path>
      </svg>
      <span is-visually-hidden="">Open external link</span>
    </span>
  </button>
</div>

<div class="DocsMobileNavBackdrop"></div><div class="DocsSidebar">
  <div class="DocsSidebar--sections">
    <div class="DocsSidebar--section DocsSidebar--header-section">
      <a class="DocsSidebar--cloudflare-logo-link DocsSidebar--link" href="/">
        <div class="DocsNavLogoLockup">
          
<div class="DocsNavLogoLockup--logo">
  <svg viewBox="0 0 48 48" fill="currentColor" role="img" aria-labelledby="title - dc6ff28d4ef84aacc81be5cc4dccd45b" xmlns="http://www.w3.org/2000/svg">
    <title id="title - dc6ff28d4ef84aacc81be5cc4dccd45b">Cloudflare Docs logomark</title>
    <path d="M31.236 28.717c-.373-.548-1.003-.864-1.76-.9l-14.353-.195a.262.262 0 01-.221-.122.348.348 0 01-.035-.267.396.396 0 01.338-.268l14.48-.195c1.714-.085 3.58-1.533 4.232-3.309l.828-2.25a.503.503 0 00.023-.292c-.932-4.404-4.698-7.689-9.198-7.689-4.15 0-7.672 2.798-8.931 6.679a4.156 4.156 0 00-2.973-.864c-1.994.207-3.59 1.874-3.789 3.954a4.84 4.84 0 00.105 1.545c-3.253.097-5.853 2.871-5.853 6.29 0 .304.024.608.059.912.023.146.14.256.28.256h26.488c.151 0 .291-.11.338-.268l.198-.742c.245-.876.152-1.68-.256-2.275zM36.062 21.39c-.128 0-.268 0-.396.012-.093 0-.175.073-.21.17l-.56 2.032c-.244.876-.151 1.679.257 2.275.373.548 1.003.864 1.76.9l3.055.195c.093 0 .175.049.222.122a.356.356 0 01.035.267.396.396 0 01-.339.268l-3.182.195c-1.726.085-3.58 1.532-4.232 3.309l-.234.62c-.046.122.035.243.164.243h10.935a.289.289 0 00.28-.219 8.654 8.654 0 00.292-2.214c0-4.501-3.521-8.175-7.847-8.175"></path>
  </svg>
</div>
<span class="DocsNavLogoLockup--text">
  <span data-text="Cloudflare">Cloudflare </span>
  <span data-text="Docs">Docs</span>
</span>
        </div>
      </a>
    </div>

    <div class="DocsSidebar--section-separator"></div>

    <div class="DocsSidebar--section DocsSidebar--docs-title-section">
      <a aria-current="page" class="DocsSidebar--docs-title-logo-link DocsSidebar--link" href="/kv/">
        <div class="DocsNavLogoLockup">
          <div class="DocsNavLogoLockup--logo">
            <span title="Cloudflare KV logo"><svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 44.95H15V40.95H22V44.95Z" fill="#F6821F"/><path d="M15 36.95H22V32.95H15V36.95Z" fill="#F6821F"/><path d="M22 28.95H15V24.95H22V28.95Z" fill="#F6821F"/><path d="M26 44.95L49 44.95V40.95L26 40.95V44.95Z" fill="#F6821F"/><path d="M49 36.95L26 36.95V32.95L49 32.95V36.95Z" fill="#F6821F"/><path d="M26 28.95L49 28.95V24.95L26 24.95V28.95Z" fill="#F6821F"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12L8 10H27L28.6751 10.9072L32.0832 16.1316H56L58 18.1316V52L56 54H8L6 52V12ZM10 14V50H54V20.1316H31L29.3249 19.2243L25.9168 14H10Z" fill="#F6821F"/></svg></span>
          </div>

          <span class="DocsNavLogoLockup--text">
            <span class="DocsSidebar--docs-title-text-scaler" style="--length:2">KV</span>
          </span>
        </div>
      </a>

      <div class="DocsSidebar--section-more Dropdown" data-expanded="false">
        <button class="DocsSidebar--section-more-button Button" aria-expanded="false">
          <div class="DocsSidebar--section-more-button-icon">
            <svg viewBox="0 0 4 16" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" fill="currentColor" role="img" aria-labelledby="title-6032186738345315"
              xmlns="http://www.w3.org/2000/svg">
              <title id="title-6032186738345315">Dropdown icon</title>
              <path d="M2,2v0m0,6v0m0,6v0z"></path>
            </svg>
            <span is-visually-hidden>KV menu</span>
          </div>
        </button>

        <div class="DocsSidebar--section-more-dropdown Dropdown--dropdown">
          <ul class="Dropdown--list"><li class="Dropdown--item">
                <a class="Dropdown--link" href="https://workers.cloudflare.com" tabindex="-1">Workers home</a>
              </li><li class="Dropdown--item">
                <a class="Dropdown--link" href="https://discord.cloudflare.com" tabindex="-1">Discord</a>
              </li></ul>
        </div>
      </div>
    </div>

    <div class="DocsSidebar--section DocsSidebar--nav-section" style="position:relative;overflow:hidden;width:100%;height:100%">
      <div style="position: absolute; inset: 0px; overflow-y: auto; margin-right: 0px; margin-bottom: 0px;">
        <div class="DocsSidebar--nav-section-shadow" style="opacity: 0;"></div>

        <ul class="DocsSidebar--nav">
          <li class="DocsSidebar--nav-item">
            <a class="DocsSidebar--nav-link" href="/kv/">
              <span class="DocsSidebar--nav-link-highlight"></span>
              <span class="DocsSidebar--nav-link-text">Overview</span>
            </a>
          </li>
          <li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/kv/get-started/"  >
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Get started</span></a></li><li class="DocsSidebar--nav-item"><button class="Button DocsSidebar--nav-expand-collapse-button">
      <span class="DocsSidebar--nav-expand-collapse-button-content" aria-hidden="true"></span>
      <span is-visually-hidden>Expand: API</span>
    </button><a class="DocsSidebar--nav-link"  href="/kv/api/"  >
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">API</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style="min-height:0px;"><div class="DocsSidebar--nav-item-collapse-wrapper">
          <div class="DocsSidebar--nav-item-collapse-wrapperInner">
            <div class="DocsSidebar--nav-item-collapse-content">
              <ul class="DocsSidebar--nav-subnav" depth="1" style="--depth:1"><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/kv/api/delete-key-value-pairs/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Delete key-value pairs</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/kv/api/list-keys/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">List keys</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/kv/api/read-key-value-pairs/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Read key-value pairs</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/kv/api/write-key-value-pairs/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Write key-value pairs</span></a></li></ul>
            </div>
          </div>
        </div>
      </div></li><li class="DocsSidebar--nav-item" is-active-root is-expanded><button class="Button DocsSidebar--nav-expand-collapse-button">
      <span class="DocsSidebar--nav-expand-collapse-button-content" aria-hidden="true"></span>
      <span is-visually-hidden>Expand: Tutorials</span>
    </button><a class="DocsSidebar--nav-link"  href="/kv/tutorials/"  >
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Tutorials</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-expanded" style="min-height:0px;transition-duration:400ms" is-expanded><div class="DocsSidebar--nav-item-collapse-wrapper">
          <div class="DocsSidebar--nav-item-collapse-wrapperInner">
            <div class="DocsSidebar--nav-item-collapse-content">
              <ul class="DocsSidebar--nav-subnav" depth="1" style="--depth:1"><li class="DocsSidebar--nav-item" is-active><a aria-current="page" class="DocsSidebar--nav-link"  href="/kv/tutorials/workers-kv-from-rust/"   is-active>
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Use Workers KV directly from Rust</span></a></li></ul>
            </div>
          </div>
        </div>
      </div></li><li class="DocsSidebar--nav-item"><button class="Button DocsSidebar--nav-expand-collapse-button">
      <span class="DocsSidebar--nav-expand-collapse-button-content" aria-hidden="true"></span>
      <span is-visually-hidden>Expand: Platform</span>
    </button><a class="DocsSidebar--nav-link"  href="/kv/platform/"  >
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Platform</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style="min-height:0px;"><div class="DocsSidebar--nav-item-collapse-wrapper">
          <div class="DocsSidebar--nav-item-collapse-wrapperInner">
            <div class="DocsSidebar--nav-item-collapse-content">
              <ul class="DocsSidebar--nav-subnav" depth="1" style="--depth:1"><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/kv/platform/pricing/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Pricing</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/kv/platform/limits/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Limits</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/workers/platform/storage-options/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Choose a data or storage product</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a></li></ul>
            </div>
          </div>
        </div>
      </div></li><li class="DocsSidebar--nav-item"><button class="Button DocsSidebar--nav-expand-collapse-button">
      <span class="DocsSidebar--nav-expand-collapse-button-content" aria-hidden="true"></span>
      <span is-visually-hidden>Expand: Reference</span>
    </button><a class="DocsSidebar--nav-link"  href="/kv/reference/"  >
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Reference</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style="min-height:0px;"><div class="DocsSidebar--nav-item-collapse-wrapper">
          <div class="DocsSidebar--nav-item-collapse-wrapperInner">
            <div class="DocsSidebar--nav-item-collapse-content">
              <ul class="DocsSidebar--nav-subnav" depth="1" style="--depth:1"><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/kv/reference/environments/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Environments</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/kv/reference/kv-commands/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">KV commands</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/kv/reference/how-kv-works/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">How KV works</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/kv/reference/kv-bindings/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">KV bindings</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/kv/reference/kv-namespaces/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">KV namespaces</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/kv/reference/data-security/"   tabindex="-1">
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Data security</span></a></li></ul>
            </div>
          </div>
        </div>
      </div></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/kv/glossary/"  >
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">Glossary</span></a></li><li class="DocsSidebar--nav-item"><a class="DocsSidebar--nav-link"  href="/api/operations/workers-kv-namespace-list-namespaces"  >
      <span class="DocsSidebar--nav-link-highlight"></span>
      <span class="DocsSidebar--nav-link-text">KV REST API</span><span class="apiSidebarIcon"><span class="DocsMarkdown--link-api-icon" aria-hidden="true">
  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="23px" height="12px" viewBox="0 0 23 12" version="1.1">
    <title>API link label</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Group">
            <rect id="Rectangle" fill="#e06d10" x="0" y="0" width="23" height="12" rx="2"/>
            <path d="M8.12890625,10 L9.58984375,10 L6.83984375,2.24951172 L5.27685547,2.24951172 L2.52685547,10 L3.95556641,10 L4.61621094,7.99658203 L7.46826172,7.99658203 L8.12890625,10 Z M6.0234375,3.61914062 L6.06103516,3.61914062 L7.140625,6.92773438 L4.93847656,6.92773438 L6.0234375,3.61914062 Z M10.9169922,2.24951172 L10.9169922,10 L12.3027344,10 L12.3027344,7.43798828 L13.8710938,7.43798828 C15.4394531,7.43798828 16.5405273,6.390625 16.5405273,4.84375 C16.5405273,3.296875 15.4716797,2.24951172 13.9301758,2.24951172 L10.9169922,2.24951172 Z M12.3027344,3.3828125 L13.5649414,3.3828125 C14.5585938,3.3828125 15.1333008,3.91455078 15.1333008,4.84375 C15.1333008,5.78369141 14.5532227,6.32080078 13.5595703,6.32080078 L12.3027344,6.32080078 L12.3027344,3.3828125 Z M19.4360352,10 L18.050293,10 L18.050293,2.24951172 L19.4360352,2.24951172 L19.4360352,10 Z" id="API" fill="#FFFFFF" fill-rule="nonzero"/>
        </g>
    </g>
</svg>
  <span is-visually-hidden>Open API docs link</span>
</span></span></a></li></ul>
      </div>
      <div style="position:absolute;height:6px;display:none;right:2px;bottom:2px;left:2px;border-radius:3px">
        <div style="position:relative;display:block;height:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)"></div>
      </div>
      <div style="position:absolute;width:6px;display:none" class="Scrollbars--track Scrollbars--track-vertical">
        <div style="position:relative;display:block;width:100%" class="Scrollbars--thumb Scrollbars--thumb-vertical"></div>
      </div>
    </div>
    <div class="toggleSidebar" >
    <button id="toggleSidebarButton" style="width: 2em; height: 2em;" title="Select to collapse and expand the sidebar navigation">
      <svg id="toggleSidebarSVG" aria-hidden="true" class="" height="1" width="1" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path id="toggleSidebarSVGPath" d="M15 2a1 1 0 0 0-1 1v10a1 1 0 0 0 2 0V3a1 1 0 0 0-1-1zm-10.407.993l-4.3 4.3a1 1 0 0 0 0 1.414l4.3 4.3a1 1 0 0 0 1.415-1.416L3.417 9H10a1 1 0 1 0 0-2H3.417l2.591-2.591a1 1 0 1 0-1.415-1.416z"></path></svg>
    </button>
  </div>
  </div>
  <div class="DocsSidebar--shadow"></div>
</div><div class="DocsToolbar">

<div class="DocsToolbar--search">
  <div class="DocsSearch">
    <div id="algolia"></div>
  </div>
</div>
<div class="DocsToolbar--tools">
  <a class="DocsToolbar--feedback Button Button-is-docs-secondary" href="https://github.com/cloudflare/cloudflare-docs/issues/new/choose" target="_blank">
    <svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 17">
      <path d="M14 2.5H2l-.5.5v11.165l.863.345 2.852-3.01H14l.5-.5V3l-.5-.5Zm-.5 8H4.785L2.5 12.911V3.5h11v7Z"
        fill="currentColor"></path>
      <path d="M12.5 5.003h-9v1h9v-1ZM12.5 7.5h-9v1h9v-1Z" fill="currentColor"></path>
    </svg>Give Feedback
  </a>
  

  <div class="DocsToolbar--tools-spacer"></div><div class="DocsToolbar--tools-icon-item">
    <div class="Tooltip---root">
      <div class="DocsToolbar--tools-icon-item-content">
        <a class="Link Link-without-underline" href="https://github.com/cloudflare/cloudflare-docs/blob/production/content/kv/tutorials/workers-kv-from-rust.md" target="_blank">
          <svg viewBox="0 0 16 16" fill="currentColor" role="img" aria-labelledby="title-6991762763429039"
            xmlns="http://www.w3.org/2000/svg">
            <title id="title-6991762763429039">GitHub icon</title>
            <path
              d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"
              fill-rule="evenodd"></path>
          </svg>
        </a>
      </div>

      <span class="Tooltip" role="tooltip" position="bottom-end">
        Edit this page on GitHub
      </span>
    </div>
  </div>

  <div class="DocsToolbar--tools-spacer"></div>

  <div class="DocsToolbar--theme-toggle">
    <button id="MobileSearch" onclick='document.querySelector(".DocSearch.DocSearch-Button").click()'>
      <svg viewBox="0 0 16 16" fill="currentColor" role="img" aria-labelledby="title-9701125841014673"
        xmlns="http://www.w3.org/2000/svg">
        <title id="title-9701125841014673">Search icon (depiction of a magnifying glass)</title>
        <path
          d="M11.999 10.585l3.458 3.458a1 1 0 01-1.414 1.414L10.585 12a6.5 6.5 0 111.414-1.414zM6.75 11.5a4.75 4.75 0 100-9.5 4.75 4.75 0 000 9.5z">
        </path>
      </svg>
    </button><div class="Tooltip---root">
  <div class="ThemeToggle">
    <input type="checkbox" id="ThemeToggle" class="ThemeToggle--input">

    <label class="ThemeToggle--toggle" for="ThemeToggle">
      <div class="ThemeToggle--toggle-handle"></div>

      <div class="ThemeToggle--toggle-handle-icon ThemeToggle--sun">
        <svg viewBox="0 0 16 16" fill="currentColor" role="img" aria-labelledby="title-8812071124069258"
          xmlns="http://www.w3.org/2000/svg">
          <title id="title-8812071124069258">Light theme icon (depiction of a sun)</title>
          <path
            d="M7.5 11.465a3.482 3.482 0 01-1.596-.662L4.11 12.596a.5.5 0 01-.707-.707l1.793-1.793A3.482 3.482 0 014.535 8.5H2a.5.5 0 010-1h2.535a3.482 3.482 0 01.662-1.596L3.404 4.11a.5.5 0 01.707-.707l1.793 1.793A3.482 3.482 0 017.5 4.535V2a.5.5 0 011 0v2.535a3.482 3.482 0 011.596.662l1.793-1.793a.5.5 0 01.707.707l-1.793 1.793c.343.458.577 1.003.662 1.596H14a.5.5 0 110 1h-2.535a3.482 3.482 0 01-.662 1.596l1.793 1.793a.5.5 0 01-.707.707l-1.793-1.793a3.482 3.482 0 01-1.596.662V14a.5.5 0 11-1 0v-2.535z">
          </path>
        </svg>
      </div>

      <div class="ThemeToggle--toggle-handle-icon ThemeToggle--moon">
        <svg viewBox="0 0 16 16" fill="currentColor" role="img" aria-labelledby="title-5971296394189265"
          xmlns="http://www.w3.org/2000/svg">
          <title id="title-5971296394189265">Dark theme icon (depiction of a moon)</title>
          <path d="M7.067 3.087a5 5 0 005.466 7.026 5 5 0 11-5.466-7.026z"></path>
        </svg>
      </div>
    </label>

    <span class="Tooltip" id="ThemeToggle--tooltip" role="tooltip" position="bottom-end">Set theme to dark (⇧+D)</span>
  </div>
</div></div>
</div></div>

    <main class="DocsBody">
      <div class="DocsBody--sidebar" with-styled-webkit-scrollbars="">
  <div class="DocsBody--sidebar-content-scroll-fade"></div>
  <div class="DocsBody--sidebar-content">
      <ul class="DocsTableOfContents" hidden>
        <li><a class="DocsTableOfContents-link" href="#docs-content">↑ Top</a></li>
      </ul>
  </div>
</div>


      <div id="docs-content" data-reach-skip-nav-content></div>
<ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a href="/products/" class="DocsMarkdown--link" itemprop="item">
        <span itemprop="name" class="DocsMarkdown--link-content">Products</span></a>
      <meta itemprop="position" content="1" />
    </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/kv/" itemprop="item" class="DocsMarkdown--link" >
            <span class="DocsMarkdown--link-content"  itemprop="name" >KV</span></a><meta itemprop="position" content="2" />
        </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/kv/tutorials/" itemprop="item" class="DocsMarkdown--link" >
            <span class="DocsMarkdown--link-content"  itemprop="name" >Tutorials</span></a><meta itemprop="position" content="3" />
        </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/kv/tutorials/workers-kv-from-rust/" itemprop="item" class="DocsMarkdown--link" >
            <span class="DocsMarkdown--link-content"  itemprop="name" >Use Workers KV directly from Rust</span></a><meta itemprop="position" content="4" />
        </li></ol><div class="DocsContent" id="main" page-type="document">

        <article class="DocsMarkdown">
  <h1 id="use-workers-kv-directly-from-rust">Use Workers KV directly from Rust</h1><p>This tutorial will teach you how to read and write to KV directly from Rust
using <a href="https://github.com/cloudflare/workers-rs" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">workers-rs</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>.</p>
<h2 id="before-you-start">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#before-you-start">&#8203;​</a>
    </span>
    <span>Before you start</span>
  </h2><p>All of the tutorials assume you have already completed the <a href=/workers/get-started/guide/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Get started guide</span></a>, which gets you set up with a Cloudflare Workers account, <a href="https://github.com/cloudflare/workers-sdk/tree/main/packages/create-cloudflare" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">C3</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>, and <a href=/workers/wrangler/install-and-update/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Wrangler</span></a>.</p>
<h2 id="prerequisites">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#prerequisites">&#8203;​</a>
    </span>
    <span>Prerequisites</span>
  </h2><p>To complete this tutorial, you will need:</p>
<ul>
<li><a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Git</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>.</li>
<li><a href=/workers/wrangler/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Wrangler</span></a> CLI.</li>
<li>The <a href="https://www.rust-lang.org/tools/install" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Rust</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> toolchain.</li>
<li>And <code>cargo-generate</code> sub-command by running:</li>
</ul>
<div class="code-container">
    <unparsed-codeblock data-language="sh" data-code="%24&#43;cargo&#43;install&#43;cargo-generate"></unparsed-codeblock>
    <vue-component name="CodeCopy"></vue-component>
</div><h2 id="1-create-your-worker-project-in-rust">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#1-create-your-worker-project-in-rust">&#8203;​</a>
    </span>
    <span>1. Create your Worker project in Rust</span>
  </h2><p>Open a terminal window, and run the following command to generate a Worker project template in Rust:</p>
<div class="code-container">
    <unparsed-codeblock data-language="sh" data-code="%24&#43;cargo&#43;generate&#43;cloudflare%2Fworkers-rs"></unparsed-codeblock>
    <vue-component name="CodeCopy"></vue-component>
</div><p>Then select <code>template/hello-world-http</code> template, give your project a descriptive name and select enter. A new project should be created in your directory. Open the project in your editor and run <code>npx wrangler dev</code> to compile and run your project.</p>
<p>In this tutorial, you will use Workers KV from Rust to build an app to store and retrieve cities by a given country name.</p>
<h2 id="2-create-a-kv-namespace">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#2-create-a-kv-namespace">&#8203;​</a>
    </span>
    <span>2. Create a KV namespace</span>
  </h2><p>In the terminal, use Wrangler to create a KV namespace for <code>cities</code>. This generates a configuration to be added to the project:</p>
<div class="code-container">
    <unparsed-codeblock data-language="sh" data-code="%24&#43;npx&#43;wrangler&#43;kv%3Anamespace&#43;create&#43;cities"></unparsed-codeblock>
    <vue-component name="CodeCopy"></vue-component>
</div><p>To add this configuration to your project, open the <code>wrangler.toml</code> file and create an entry for <code>kv_namespaces</code> above the build command:</p>
<div class="code-container">
    <unparsed-codeblock data-language="toml" data-code="---%0Afilename%3A&#43;wrangler.toml%0A---%0Akv_namespaces&#43;%3D&#43;%5B%0A&#43;&#43;%7B&#43;binding&#43;%3D&#43;%22cities%22%2C&#43;id&#43;%3D&#43;%22e29b263ab50e42ce9b637fa8370175e8%22&#43;%7D%0A%5D%0A%0A%23&#43;build&#43;command..."></unparsed-codeblock>
    <vue-component name="CodeCopy"></vue-component>
</div><p>With this configured, you can access the KV namespace with the binding <code>&quot;cities&quot;</code> from Rust.</p>
<h2 id="3-write-data-to-kv">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#3-write-data-to-kv">&#8203;​</a>
    </span>
    <span>3. Write data to KV</span>
  </h2><p>For this app, you will create two routes: A <code>POST</code> route to receive and store the city in KV, and a <code>GET</code> route to retrieve the city of a given country. For example, a <code>POST</code> request to <code>/France</code> with a body of <code>{&quot;city&quot;: &quot;Paris&quot;}</code> should create an entry of Paris as a city in France. A <code>GET</code> request to <code>/France</code> should retrieve from KV and respond with Paris.</p>
<p>Install <a href="https://serde.rs/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Serde</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a> as a project dependency to handle JSON <code>cargo add serde</code>. Then create an app router and a struct for <code>Country</code> in <code>src/lib.rs</code>:</p>
<div class="code-container">
    <unparsed-codeblock data-language="rust" data-code="---%0Afilename%3A&#43;src%2Flib.rs%0Ahighlight%3A&#43;%5B1%2C6%2C8%2C9%2C10%2C11%2C15%2C17%5D%0A---%0Ause&#43;serde%3A%3A%7BDeserialize%2C&#43;Serialize%7D%3B%0Ause&#43;worker%3A%3A%2A%3B%0A%0A%23%5Bevent%28fetch%29%5D%0Aasync&#43;fn&#43;fetch%28req%3A&#43;Request%2C&#43;env%3A&#43;Env%2C&#43;_ctx%3A&#43;Context%29&#43;-%3E&#43;Result%3CResponse%3E&#43;%7B%0A&#43;&#43;&#43;&#43;let&#43;router&#43;%3D&#43;Router%3A%3Anew%28%29%3B%0A%0A&#43;&#43;&#43;&#43;%23%5Bderive%28Serialize%2C&#43;Deserialize%2C&#43;Debug%29%5D%0A&#43;&#43;&#43;&#43;struct&#43;Country&#43;%7B%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;city%3A&#43;String%2C%0A&#43;&#43;&#43;&#43;%7D%0A%0A&#43;&#43;&#43;&#43;router%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;%2F%2F&#43;TODO%3A%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;.post_async%28%22%2F%3Acountry%22%2C&#43;%7C_%2C&#43;_%7C&#43;async&#43;move&#43;%7B&#43;Response%3A%3Aempty%28%29&#43;%7D%29%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;%2F%2F&#43;TODO%3A%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;.get_async%28%22%2F%3Acountry%22%2C&#43;%7C_%2C&#43;_%7C&#43;async&#43;move&#43;%7B&#43;Response%3A%3Aempty%28%29&#43;%7D%29%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;.run%28req%2C&#43;env%29%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;.await%0A%7D"></unparsed-codeblock>
    <vue-component name="CodeCopy"></vue-component>
</div><p>For the post handler, you will retrieve the country name from the path and the city name from the request body. Then, you will save this in KV with the country as key and the city as value. Finally, the app will respond with the city name:</p>
<div class="code-container">
    <unparsed-codeblock data-language="rust" data-code="---%0Afilename%3A&#43;src%2Flib.rs%0A---%0A.post_async%28%22%2F%3Acountry%22%2C&#43;%7Cmut&#43;req%2C&#43;ctx%7C&#43;async&#43;move&#43;%7B%0A&#43;&#43;&#43;&#43;let&#43;country&#43;%3D&#43;ctx.param%28%22country%22%29.unwrap%28%29%3B%0A&#43;&#43;&#43;&#43;let&#43;city&#43;%3D&#43;match&#43;req.json%3A%3A%3CCountry%3E%28%29.await&#43;%7B%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;Ok%28c%29&#43;%3D%3E&#43;c.city%2C%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;Err%28_%29&#43;%3D%3E&#43;String%3A%3Afrom%28%22%22%29%2C%0A&#43;&#43;&#43;&#43;%7D%3B%0A&#43;&#43;&#43;&#43;if&#43;city.is_empty%28%29&#43;%7B%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;return&#43;Response%3A%3Aerror%28%22Bad&#43;Request%22%2C&#43;400%29%3B%0A&#43;&#43;&#43;&#43;%7D%3B%0A&#43;&#43;&#43;&#43;return&#43;match&#43;ctx.kv%28%22cities%22%29%3F.put%28country%2C&#43;%26city%29%3F.execute%28%29.await&#43;%7B%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;Ok%28_%29&#43;%3D%3E&#43;Response%3A%3Aok%28city%29%2C%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;Err%28_%29&#43;%3D%3E&#43;Response%3A%3Aerror%28%22Bad&#43;Request%22%2C&#43;400%29%2C%0A&#43;&#43;&#43;&#43;%7D%3B%0A%7D%29"></unparsed-codeblock>
    <vue-component name="CodeCopy"></vue-component>
</div><p>Save the file and make a <code>POST</code> request to test this endpoint:</p>
<div class="code-container">
    <unparsed-codeblock data-language="sh" data-code="%24&#43;curl&#43;--json&#43;%27%7B%22city%22%3A&#43;%22Paris%22%7D%27&#43;http%3A%2F%2Flocalhost%3A8787%2FFrance"></unparsed-codeblock>
    <vue-component name="CodeCopy"></vue-component>
</div><h2 id="4-read-data-from-kv">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#4-read-data-from-kv">&#8203;​</a>
    </span>
    <span>4. Read data from KV</span>
  </h2><p>To retrieve cities stored in KV, write a <code>GET</code> route that pulls the country name from the path and searches KV. You also need some error handling if the country is not found:</p>
<div class="code-container">
    <unparsed-codeblock data-language="rust" data-code="---%0Afilename%3A&#43;src%2Flib.rs%0A---%0A.get_async%28%22%2F%3Acountry%22%2C&#43;%7C_req%2C&#43;ctx%7C&#43;async&#43;move&#43;%7B%0A&#43;&#43;&#43;&#43;if&#43;let&#43;Some%28country%29&#43;%3D&#43;ctx.param%28%22country%22%29&#43;%7B%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;return&#43;match&#43;ctx.kv%28%22cities%22%29%3F.get%28country%29.text%28%29.await%3F&#43;%7B%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;Some%28city%29&#43;%3D%3E&#43;Response%3A%3Aok%28city%29%2C%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;None&#43;%3D%3E&#43;Response%3A%3Aerror%28%22Country&#43;not&#43;found%22%2C&#43;404%29%2C%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;%7D%3B%0A&#43;&#43;&#43;&#43;%7D%0A&#43;&#43;&#43;&#43;Response%3A%3Aerror%28%22Bad&#43;Request%22%2C&#43;400%29%0A%7D%29"></unparsed-codeblock>
    <vue-component name="CodeCopy"></vue-component>
</div><p>Save and make a curl request to test the endpoint:</p>
<div class="code-container">
    <unparsed-codeblock data-language="sh" data-code="%24&#43;curl&#43;http%3A%2F%2Flocalhost%3A8787%2FFrance"></unparsed-codeblock>
    <vue-component name="CodeCopy"></vue-component>
</div><h2 id="5-deploy-your-project">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#5-deploy-your-project">&#8203;​</a>
    </span>
    <span>5. Deploy your project</span>
  </h2><p>The source code for the completed app should include the following:</p>
<div class="code-container">
    <unparsed-codeblock data-language="rust" data-code="---%0Afilename%3A&#43;src%2Flib.rs%0A---%0Ause&#43;serde%3A%3A%7BDeserialize%2C&#43;Serialize%7D%3B%0Ause&#43;worker%3A%3A%2A%3B%0A%0A%23%5Bevent%28fetch%29%5D%0Aasync&#43;fn&#43;fetch%28req%3A&#43;Request%2C&#43;env%3A&#43;Env%2C&#43;_ctx%3A&#43;Context%29&#43;-%3E&#43;Result%3CResponse%3E&#43;%7B%0A&#43;&#43;&#43;&#43;let&#43;router&#43;%3D&#43;Router%3A%3Anew%28%29%3B%0A%0A&#43;&#43;&#43;&#43;%23%5Bderive%28Serialize%2C&#43;Deserialize%2C&#43;Debug%29%5D%0A&#43;&#43;&#43;&#43;struct&#43;Country&#43;%7B%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;city%3A&#43;String%2C%0A&#43;&#43;&#43;&#43;%7D%0A%0A&#43;&#43;&#43;&#43;router%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;.post_async%28%22%2F%3Acountry%22%2C&#43;%7Cmut&#43;req%2C&#43;ctx%7C&#43;async&#43;move&#43;%7B%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;let&#43;country&#43;%3D&#43;ctx.param%28%22country%22%29.unwrap%28%29%3B%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;let&#43;city&#43;%3D&#43;match&#43;req.json%3A%3A%3CCountry%3E%28%29.await&#43;%7B%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;Ok%28c%29&#43;%3D%3E&#43;c.city%2C%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;Err%28_%29&#43;%3D%3E&#43;String%3A%3Afrom%28%22%22%29%2C%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;%7D%3B%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;if&#43;city.is_empty%28%29&#43;%7B%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;return&#43;Response%3A%3Aerror%28%22Bad&#43;Request%22%2C&#43;400%29%3B%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;%7D%3B%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;return&#43;match&#43;ctx.kv%28%22cities%22%29%3F.put%28country%2C&#43;%26city%29%3F.execute%28%29.await&#43;%7B%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;Ok%28_%29&#43;%3D%3E&#43;Response%3A%3Aok%28city%29%2C%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;Err%28_%29&#43;%3D%3E&#43;Response%3A%3Aerror%28%22Bad&#43;Request%22%2C&#43;400%29%2C%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;%7D%3B%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;%7D%29%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;.get_async%28%22%2F%3Acountry%22%2C&#43;%7C_req%2C&#43;ctx%7C&#43;async&#43;move&#43;%7B%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;if&#43;let&#43;Some%28country%29&#43;%3D&#43;ctx.param%28%22country%22%29&#43;%7B%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;return&#43;match&#43;ctx.kv%28%22cities%22%29%3F.get%28country%29.text%28%29.await%3F&#43;%7B%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;Some%28city%29&#43;%3D%3E&#43;Response%3A%3Aok%28city%29%2C%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;None&#43;%3D%3E&#43;Response%3A%3Aerror%28%22Country&#43;not&#43;found%22%2C&#43;404%29%2C%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;%7D%3B%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;%7D%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;Response%3A%3Aerror%28%22Bad&#43;Request%22%2C&#43;400%29%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;%7D%29%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;.run%28req%2C&#43;env%29%0A&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;.await%0A%7D"></unparsed-codeblock>
    <vue-component name="CodeCopy"></vue-component>
</div><p>To deploy your Worker, run the following command:</p>
<div class="code-container">
    <unparsed-codeblock data-language="sh" data-code="%24&#43;npx&#43;wrangler&#43;deploy"></unparsed-codeblock>
    <vue-component name="CodeCopy"></vue-component>
</div><h2 id="related-resources">
    <span class="DocsMarkdown--header-anchor-positioner">
      <a class="DocsMarkdown--header-anchor Link Link-without-underline" href="#related-resources">&#8203;​</a>
    </span>
    <span>Related resources</span>
  </h2><ul>
<li><a href=/workers/languages/rust/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Rust support in Workers</span></a>.</li>
<li><a href=/kv/get-started/ class="DocsMarkdown--link"><span class="DocsMarkdown--link-content">Using KV in Workers</span></a>.</li>
</ul>
</article>
      </div>
    </main>

    <footer class="DocsFooter">
  <div class="DocsFooter--content">
    <div class="DocsFooterResources">      
      <span class="DocsFooter--content-additional-wrapper"><a href="https://dash.cloudflare.com/?to=/:account/workers" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Cloudflare Dashboard</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>
      </span>
      
      <span class="DocsFooter--content-dot-spacer"> &nbsp; · &nbsp; </span>

      
      <span class="DocsFooter--content-additional-wrapper"><a href="https://discord.cloudflare.com" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Discord</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>
      </span>

      <span class="DocsFooter--content-dot-spacer"> &nbsp; · &nbsp; </span>

      
      <span class="DocsFooter--content-additional-wrapper"><a href="https://community.cloudflare.com" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Community</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>
      </span> 
      
      <span class="DocsFooter--content-dot-spacer"> &nbsp; · &nbsp; </span>

      <span class="DocsFooter--content-additional-wrapper"><a href="https://www.cloudflare.com/learning/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Learning Center</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a></span>

      <span class="DocsFooter--content-dot-spacer"> &nbsp; · &nbsp; </span>

      <span class="DocsFooter--content-additional-wrapper"><a href="/support/contacting-cloudflare-support/" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Support Portal</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a>
      </span>

      <span class="DocsFooter--content-dot-spacer"> &nbsp; · &nbsp; </span>

      <span class="DocsFooter--content-additional-wrapper">
        
          <a role="button" id="ot-sdk-btn" class="ot-sdk-show-settings">Cookie Settings</a>
        
      </span>
    </div>
    <div>
      <span class="DocsFooter--edit-on-gh-link-wrapper"><a href="https://github.com/cloudflare/cloudflare-docs/blob/production/content/kv/tutorials/workers-kv-from-rust.md" class="DocsMarkdown--link" target="_blank" rel="noopener">
  <span class="DocsMarkdown--link-content">Edit on GitHub</span><span class="DocsMarkdown--link-external-icon" aria-hidden="true">
  <svg fill="none" stroke="currentColor" stroke-width="1.5" width="23px" height="12px" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg">
    <title id="title-4744738674102027">External link icon</title>
    <path d="M6.75,1.75h-5v12.5h12.5v-5m0,-4v-3.5h-3.5M8,8l5.5-5.5"></path>
  </svg>
  <span is-visually-hidden>Open external link</span>
</span></a></span><span class="DocsFooter--content-dot-spacer"> &nbsp; · &nbsp; </span>

      <span class="DocsFooter--content-time">
        Updated <time
  class="relative"
  datetime=2024-05-16T13:19:14&#43;01:00
  title=2024-05-16
>May 16, 2024</time>
      </span></div>
  </div>
  <script type="text/javascript" src="/lightbox.js" defer></script>
  <link rel="stylesheet" href="/lightbox.css">
</footer>

  </div>
<script defer src="https://unpkg.com/littlefoot@4.0.0-11/dist/littlefoot.js" type="application/javascript" ></script>
    <script type="application/javascript"> document.addEventListener('DOMContentLoaded', () => littlefoot.default()) </script>
  </body>
</html>
