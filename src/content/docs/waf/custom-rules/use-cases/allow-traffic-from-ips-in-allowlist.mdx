---
pcx_content_type: configuration
title: Allow traffic from IP addresses in allowlist only
head:
  - tag: title
    content: Allow traffic from IP addresses in allowlist only
---

This example skips WAF rules for requests from IP addresses in an allowlist (defined using an [IP list](/waf/tools/lists/custom-lists/#lists-with-ip-addresses-ip-lists)).

1.  [Create an IP list](/waf/tools/lists/create-dashboard/) with the IP addresses for which you want to allow access.<br/>
    For example, create an IP list named `allowed_ips` with one or more IP addresses. For more information on the accepted IP address formats, refer to [IP lists](/waf/tools/lists/custom-lists/#lists-with-ip-addresses-ip-lists).

2.  Create a custom rule skipping all rules for any request from the IPs in the list you created (`allowed_ips` in the current example).

    - **Expression**: `(ip.src in $allowed_ips)`
    - **Action**: _Skip:_
      - _All remaining custom rules_
      - _Skip phases_:
        - _All rate limiting rules_
        - _All Super Bot Fight Mode rules_
        - _All managed rules_

Make sure the new rule appears before any other custom rules in the rules list.

## Other resources

- [Use case: Require known IP addresses in site admin area](/waf/custom-rules/use-cases/site-admin-only-known-ips/)
- [Available skip options](/waf/custom-rules/skip/options/)
