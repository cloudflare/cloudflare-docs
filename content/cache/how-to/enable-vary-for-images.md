---
title: Enable vary for images
pcx-content-type: how-to
---

# Enable vary for images

Vary for Images is enabled through Cloudflareâ€™s API by creating a variants rule. In the examples below, learn how to serve JPEG, WebP, and AVIF variants for `.jpeg` and `.jpg` extensions.

## Create a variants rule
{{<raw>}}<pre class="CodeBlock CodeBlock-with-rows CodeBlock-scrolls-horizontally CodeBlock-is-light-in-light-theme CodeBlock--language-json" language="json"><code><span class="CodeBlock--rows"><span class="CodeBlock--rows-content"><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain">curl -X PATCH </span></div></span><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain"></span><span class="CodeBlock--token-string">&quot;https://api.cloudflare.com/client/v4/zones/023e105f4ecef8ad9ca31a8372d0 c353/cache/variants&quot;</span><span class="CodeBlock--token-plain"> \ </span></div></span><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain">-H </span><span class="CodeBlock--token-string">&quot;X-Auth-Email: user@example.com&quot;</span><span class="CodeBlock--token-plain"> \ </span></div></span><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain">-H </span><span class="CodeBlock--token-string">&quot;X-Auth-Key: 3xamp1ek3y1234&quot;</span><span class="CodeBlock--token-plain"> \ </span></div></span><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain">-H </span><span class="CodeBlock--token-string">&quot;Content-Type: application/json&quot;</span><span class="CodeBlock--token-plain"> \ </span></div></span><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain">--data </span></div></span><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain">'</span><span class="CodeBlock--token-punctuation">{</span><span class="CodeBlock--token-property">&quot;value&quot;</span><span class="CodeBlock--token-operator">:</span><span class="CodeBlock--token-punctuation">{</span><span class="CodeBlock--token-property">&quot;jpeg&quot;</span><span class="CodeBlock--token-operator">:</span><span class="CodeBlock--token-punctuation">[</span><span class="CodeBlock--token-string">&quot;image/webp&quot;</span><span class="CodeBlock--token-punctuation">,</span><span class="CodeBlock--token-string">&quot;image/avif&quot;</span><span class="CodeBlock--token-punctuation">]</span><span class="CodeBlock--token-punctuation">,</span><span class="CodeBlock--token-property">&quot;jpg&quot;</span><span class="CodeBlock--token-operator">:</span><span class="CodeBlock--token-punctuation">[</span><span class="CodeBlock--token-string">&quot;image/webp&quot;</span><span class="CodeBlock--token-punctuation">,</span><span class="CodeBlock--token-string">&quot;image/avif&quot;</span><span class="CodeBlock--token-punctuation">]</span><span class="CodeBlock--token-punctuation">}</span><span class="CodeBlock--token-punctuation">}</span><span class="CodeBlock--token-plain">' </span></div></span></span></span></code></pre>{{</raw>}}

## Modify to only allow WebP variants
{{<raw>}}<pre class="CodeBlock CodeBlock-with-rows CodeBlock-scrolls-horizontally CodeBlock-is-light-in-light-theme CodeBlock--language-json" language="json"><code><span class="CodeBlock--rows"><span class="CodeBlock--rows-content"><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain">curl -X PATCH </span></div></span><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain"></span><span class="CodeBlock--token-string">&quot;https://api.cloudflare.com/client/v4/zones/023e105f4ecef8ad9ca31a8372d0 c353/cache/variants&quot;</span><span class="CodeBlock--token-plain"> \ </span></div></span><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain">-H </span><span class="CodeBlock--token-string">&quot;X-Auth-Email: user@example.com&quot;</span><span class="CodeBlock--token-plain"> \ </span></div></span><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain">-H </span><span class="CodeBlock--token-string">&quot;X-Auth-Key: 3xamp1ek3y1234&quot;</span><span class="CodeBlock--token-plain"> \ </span></div></span><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain">-H </span><span class="CodeBlock--token-string">&quot;Content-Type: application/json&quot;</span><span class="CodeBlock--token-plain"> \ </span></div></span><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain">--data </span></div></span><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain">'</span><span class="CodeBlock--token-punctuation">{</span><span class="CodeBlock--token-property">&quot;value&quot;</span><span class="CodeBlock--token-operator">:</span><span class="CodeBlock--token-punctuation">{</span><span class="CodeBlock--token-property">&quot;jpeg&quot;</span><span class="CodeBlock--token-operator">:</span><span class="CodeBlock--token-punctuation">[</span><span class="CodeBlock--token-string">&quot;image/webp&quot;</span><span class="CodeBlock--token-punctuation">]</span><span class="CodeBlock--token-punctuation">,</span><span class="CodeBlock--token-property">&quot;jpg&quot;</span><span class="CodeBlock--token-operator">:</span><span class="CodeBlock--token-punctuation">[</span><span class="CodeBlock--token-string">&quot;image/webp&quot;</span><span class="CodeBlock--token-punctuation">]</span><span class="CodeBlock--token-punctuation">}</span><span class="CodeBlock--token-punctuation">}</span><span class="CodeBlock--token-plain">' </span></div></span></span></span></code></pre>{{</raw>}}

## Delete the rule
{{<raw>}}<pre class="CodeBlock CodeBlock-with-rows CodeBlock-scrolls-horizontally CodeBlock-is-light-in-light-theme CodeBlock--language-json" language="json"><code><span class="CodeBlock--rows"><span class="CodeBlock--rows-content"><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain">curl -X DELETE </span></div></span><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain"></span><span class="CodeBlock--token-string">&quot;https://api.cloudflare.com/client/v4/zones/023e105f4ecef8ad9ca31a8372d0c353/cache/variants&quot;</span><span class="CodeBlock--token-plain"> \ </span></div></span><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain">-H </span><span class="CodeBlock--token-string">&quot;X-Auth-Email: user@example.com&quot;</span><span class="CodeBlock--token-plain"> \ </span></div></span><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain">-H </span><span class="CodeBlock--token-string">&quot;X-Auth-Key: 3xamp1ek3y1234&quot;</span><span class="CodeBlock--token-plain"> </span></div></span></span></span></code></pre>{{</raw>}}

## Get the rule
{{<raw>}}<pre class="CodeBlock CodeBlock-with-rows CodeBlock-scrolls-horizontally CodeBlock-is-light-in-light-theme CodeBlock--language-json" language="json"><code><span class="CodeBlock--rows"><span class="CodeBlock--rows-content"><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain">curl -X GET </span></div></span><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain"></span><span class="CodeBlock--token-string">&quot;https://api.cloudflare.com/client/v4/zones/023e105f4ecef8ad9ca31a8372d0c353/cache/variants&quot;</span><span class="CodeBlock--token-plain"> \</span></div></span><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain">-H </span><span class="CodeBlock--token-string">&quot;X-Auth-Email: user@example.com&quot;</span><span class="CodeBlock--token-plain"> \ </span></div></span><span class="CodeBlock--row"><span class="CodeBlock--row-indicator"></span><div class="CodeBlock--row-content"><span class="CodeBlock--token-plain">-H </span><span class="CodeBlock--token-string">&quot;X-Auth-Key: 3xamp1ek3y1234&quot;</span><span class="CodeBlock--token-plain"> </span></div></span></span></span></code></pre>{{</raw>}}
